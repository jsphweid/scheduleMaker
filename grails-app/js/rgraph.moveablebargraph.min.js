RGraph=window.RGraph||{isRGraph:!0},function(win,doc,undefined){var RG=RGraph,ua=navigator.userAgent,ma=Math;RG.Highlight={},RG.Registry={},RG.Registry.store=[],RG.Registry.store["chart.event.handlers"]=[],RG.Registry.store.__rgraph_event_listeners__=[],RG.Background={},RG.background={},RG.objects=[],RG.Resizing={},RG.events=[],RG.cursor=[],RG.Effects=RG.Effects||{},RG.cache=[],RG.ObjectRegistry={},RG.ObjectRegistry.objects={},RG.ObjectRegistry.objects.byUID=[],RG.ObjectRegistry.objects.byCanvasID=[],RG.OR=RG.ObjectRegistry,RG.PI=ma.PI,RG.HALFPI=RG.PI/2,RG.TWOPI=2*RG.PI,RG.ISFF=ua.indexOf("Firefox")!=-1,RG.ISOPERA=ua.indexOf("Opera")!=-1,RG.ISCHROME=ua.indexOf("Chrome")!=-1,RG.ISSAFARI=ua.indexOf("Safari")!=-1&&!RG.ISCHROME,RG.ISWEBKIT=ua.indexOf("WebKit")!=-1,RG.ISIE=ua.indexOf("Trident")>0||navigator.userAgent.indexOf("MSIE")>0,RG.ISIE6=ua.indexOf("MSIE 6")>0,RG.ISIE7=ua.indexOf("MSIE 7")>0,RG.ISIE8=ua.indexOf("MSIE 8")>0,RG.ISIE9=ua.indexOf("MSIE 9")>0,RG.ISIE10=ua.indexOf("MSIE 10")>0,RG.ISOLD=RGraph.ISIE6||RGraph.ISIE7||RGraph.ISIE8,RG.ISIE11UP=ua.indexOf("MSIE")==-1&&ua.indexOf("Trident")>0,RG.ISIE10UP=RG.ISIE10||RG.ISIE11UP,RG.ISIE9UP=RG.ISIE9||RG.ISIE10UP,RG.getScale=function(a,b){if(0==a)return["0.2","0.4","0.6","0.8","1.0"];var c=a;if(a<=1){if(a>.5)return[.2,.4,.6,.8,Number(1).toFixed(1)];if(a>=.1)return b.Get("chart.scale.round")?[.2,.4,.6,.8,1]:[.1,.2,.3,.4,.5];for(var d=a,e=0;d<1.01;)e+=1,d*=10;var f=["2e-"+e,"4e-"+e,"6e-"+e,"8e-"+e,"10e-"+e];return a<="5e-"+e&&(f=["1e-"+e,"2e-"+e,"3e-"+e,"4e-"+e,"5e-"+e]),f}String(a).indexOf(".")>0&&(a=String(a).replace(/\.\d+$/,""));for(var g=ma.pow(10,Number(String(Number(a)).length-1)),h=g;h<a;)h+=g/2;return Number(c)>Number(h)&&(h+=g/2),a<10&&(h=Number(c)<=5?5:10),b&&"boolean"==typeof b.Get("chart.scale.round")&&b.Get("chart.scale.round")&&(h=10*g),[.2*h,.4*h,.6*h,.8*h,h]},RG.getScale2=function(a,b){var e=(a.canvas,a.context,a.properties),f="number"==typeof b["ylabels.count"]?b["ylabels.count"]:5,g="string"==typeof b["units.pre"]?b["units.pre"]:"",h="string"==typeof b["units.post"]?b["units.post"]:"",i=Number(b.max),j="number"==typeof b.min?b.min:0,k=b.strict,l=Number(b["scale.decimals"]),m=b["scale.point"],n=b["scale.thousand"],o=i,p=b["scale.round"],q={max:1,labels:[],values:[]};if(i)if(i<=1&&!k){for(var t=[1,.5,.1,.05,.01,.005,.001,5e-4,1e-4,5e-5,1e-5,5e-6,1e-6,5e-7,1e-7,5e-8,1e-8,5e-9,1e-9,5e-10,1e-10,5e-11,1e-11,5e-12,1e-12,5e-13],r=0;r<t.length;++r)if(i>t[r]){r--;break}q.max=t[r],q.labels=[],q.values=[];for(var v=0;v<f;++v){var w=((t[r]-j)/f*(v+1)+j).toFixed(l);q.values.push(w),q.labels.push(RG.numberFormat(a,w,g,h))}}else if(k){if("number"==typeof i&&k){for(var r=0;r<f;++r)q.labels.push(RG.numberFormat(a,((r+1)/f*(i-j)+j).toFixed(l),g,h)),q.values.push(((r+1)/f*(i-j)+j).toFixed(l));q.max=i}}else{i=ma.ceil(i);for(var x=ma.pow(10,ma.max(1,Number(String(Number(i)-Number(j)).length-1))),y=x;y<i;)y+=x/2;Number(o)>Number(y)&&(y+=x/2),i<=10&&(y=Number(o)<=5?5:10),a&&"boolean"==typeof p&&p&&(y=10*x),q.max=y;var z=e["chart.scale.point"],A=e["chart.scale.thousand"];a.Set("chart.scale.thousand",n),a.Set("chart.scale.point",m);for(var r=0;r<f;++r)q.labels.push(RG.number_format(a,((r+1)/f*(y-j)+j).toFixed(l),g,h)),q.values.push(((r+1)/f*(y-j)+j).toFixed(l));a.Set("chart.scale.thousand",A),a.Set("chart.scale.point",z)}else for(var i=1,r=0;r<f;++r){var s=(((i-j)/f+j)*(r+1)).toFixed(l);q.labels.push(g+s+h),q.values.push(parseFloat(s))}q.units_pre=g,q.units_post=h,q.point=m,q.decimals=l,q.thousand=n,q.numlabels=f,q.round=Boolean(p),q.min=j;for(var r=0;r<q.values.length;++r)q.values[r]=parseFloat(q.values[r]);return q},RG.arrayInvert=function(a){for(var b=0,c=a.length;b<c;++b)a[b]=!a[b];return a},RG.arrayTrim=function(a){for(var b=[],c=!1,d=0;d<a.length;d++)a[d]&&(c=!0),c&&b.push(a[d]);b=RG.arrayReverse(b);for(var e=[],c=!1,d=0;d<b.length;d++)b[d]&&(c=!0),c&&e.push(b[d]);return e=RG.arrayReverse(e)},RG.arrayClone=RG.array_clone=function(a){if(null===a||"object"!=typeof a)return a;for(var b=[],c=0,d=a.length;c<d;++c)"number"==typeof a[c]?b[c]=function(a){return Number(a)}(a[c]):"string"==typeof a[c]?b[c]=function(a){return String(a)}(a[c]):"function"==typeof a[c]?b[c]=a[c]:b[c]=RG.arrayClone(a[c]);return b},RG.arrayMax=RG.array_max=function(a){var b=null,c=Math;if("number"==typeof a)return a;if(RG.isNull(a))return 0;for(var d=0,e=a.length;d<e;++d)if("number"==typeof a[d]){var f=arguments[1]?c.abs(a[d]):a[d];b="number"==typeof b?c.max(b,f):f}return b},RG.arrayMin=function(a){var c=null,d=Math;if("number"==typeof a)return a;if(RG.isNull(a))return 0;for(var e=0,f=a.length;e<f;++e)if("number"==typeof a[e]){var g=arguments[1]?d.abs(a[e]):a[e];c="number"==typeof c?d.min(c,g):g}return c},RG.arrayPad=RG.array_pad=function(a,b){if(a.length<b)for(var c=arguments[2]?arguments[2]:null,d=a.length;d<b;d+=1)a[d]=c;return a},RG.arraySum=RG.array_sum=function(a){if("number"==typeof a)return a;if(RG.is_null(a))return 0;var b,c,d=a.length;for(b=0,c=0;b<d;c+=a[b++]);return c},RG.arrayLinearize=RG.array_linearize=function(){for(var a=[],b=arguments,c=0,d=b.length;c<d;++c)if("object"==typeof b[c]&&b[c])for(var e=0,f=b[c].length;e<f;++e)for(var g=RG.array_linearize(b[c][e]),h=0,i=g.length;h<i;++h)a.push(g[h]);else a.push(b[c]);return a},RG.arrayShift=RG.array_shift=function(a){for(var b=[],c=1,d=a.length;c<d;++c)b.push(a[c]);return b},RG.arrayReverse=RG.array_reverse=function(a){if(a){for(var b=[],c=a.length-1;c>=0;c-=1)b.push(a[c]);return b}},RG.abs=function(a){if("string"==typeof a&&(a=parseFloat(a)||0),"number"==typeof a)return ma.abs(a);if("object"==typeof a){for(i in a)"string"!=typeof i&&"number"!=typeof i&&"object"!=typeof i||(a[i]=RG.abs(a[i]));return a}return 0},RG.clear=RG.Clear=function(a){var b=a.__object__,c=a.getContext("2d"),d=arguments[1]||b&&b.get("clearto");if(a){if(RG.fireCustomEvent(b,"onbeforeclear"),RG.text2.domNodeCache&&RG.text2.domNodeCache[a.id])for(var e in RG.text2.domNodeCache[a.id]){var f=RG.text2.domNodeCache[a.id][e];f&&f.style&&(f.style.display="none")}if(!d||d&&"rgba(0,0,0,0)"===d||"transparent"===d?(c.clearRect(-100,-100,a.width+200,a.height+200),c.globalCompositeOperation="source-over"):d?RG.path2(c,"fs % fr -100 -100 % %",d,a.width+200,a.height+200):RG.path2(c,"fs % fr -100 -100 % %",b.get("clearto"),a.width+200,a.height+200),RG.Registry.Get("chart.background.image."+a.id)){var g=RG.Registry.Get("chart.background.image."+a.id);g.style.position="absolute",g.style.left="-10000px",g.style.top="-10000px"}RG.Registry.Get("chart.tooltip")&&b&&!b.get("chart.tooltips.nohideonclear")&&RG.HideTooltip(a),a.style.cursor="default",RG.FireCustomEvent(b,"onclear")}},RG.drawTitle=RG.DrawTitle=function(a,b,c){var d=canvas=a.canvas,e=context=a.context,f=a.properties;if(gutterLeft=f["chart.gutter.left"],gutterRight=f["chart.gutter.right"],c=c,gutterBottom=f["chart.gutter.bottom"],size=arguments[4]?arguments[4]:12,bold=f["chart.title.bold"],italic=f["chart.title.italic"],centerx=arguments[3]?arguments[3]:(d.width-gutterLeft-gutterRight)/2+gutterLeft,keypos=f["chart.key.position"],vpos=f["chart.title.vpos"],hpos=f["chart.title.hpos"],bgcolor=f["chart.title.background"],x=f["chart.title.x"],y=f["chart.title.y"],halign="center",g="center","bar"==a.type&&"3d"==f["chart.variant"]&&(keypos="gutter"),e.beginPath(),e.fillStyle=f["chart.text.color"]?f["chart.text.color"]:"black",keypos&&"gutter"!=keypos)var g="center";else if(keypos)var g="bottom";else var g="center";if("number"==typeof f["chart.title.vpos"]?(vpos=f["chart.title.vpos"]*c,"top"===f["chart.xaxispos"]&&(vpos=f["chart.title.vpos"]*gutterBottom+c+(d.height-c-gutterBottom))):(vpos=c-size-5,"top"===f["chart.xaxispos"]&&(vpos=d.height-gutterBottom+size+5)),"number"==typeof hpos&&(centerx=hpos*d.width),"number"==typeof x&&(centerx=x),"number"==typeof y&&(vpos=y),"string"==typeof f["chart.title.halign"]&&(halign=f["chart.title.halign"]),"string"==typeof f["chart.title.valign"]&&(g=f["chart.title.valign"]),null!==typeof f["chart.title.color"]){var h=e.fillStyle,i=f["chart.title.color"];e.fillStyle=i?i:"black"}var j=f["chart.text.font"];"string"==typeof f["chart.title.font"]&&(j=f["chart.title.font"]);RG.text2(a,{font:j,size:size,x:centerx,y:vpos,text:b,valign:g,halign:halign,bounding:null!=bgcolor,"bounding.fill":bgcolor,bold:bold,italic:italic,tag:"title",marker:!1});e.fillStyle=h},RG.getMouseXY=function(a){if(a.target){var g,h,b=a.target,c=b,d=c.style,e=0,f=0,i=parseInt(d.borderLeftWidth)||0,j=parseInt(d.borderTopWidth)||0,k=parseInt(d.paddingLeft)||0,l=parseInt(d.paddingTop)||0,m=i+k,n=j+l;if("number"==typeof a.offsetX&&"number"==typeof a.offsetY)RG.ISIE||RG.ISOPERA?RG.ISIE?(g=a.offsetX-k,h=a.offsetY-l):(g=a.offsetX,h=a.offsetY):(g=a.offsetX-i-k,h=a.offsetY-j-l);else{if("undefined"!=typeof b.offsetParent)do e+=b.offsetLeft,f+=b.offsetTop;while(b=b.offsetParent);g=a.pageX-e-m,h=a.pageY-f-n,g-=2*(parseInt(document.body.style.borderLeftWidth)||0),h-=2*(parseInt(document.body.style.borderTopWidth)||0)}return[g,h]}},RG.getCanvasXY=function(a){var b=0,c=0,d=a;do b+=d.offsetLeft,c+=d.offsetTop,"table"==d.tagName.toLowerCase()&&(RG.ISCHROME||RG.ISSAFARI)&&(b+=parseInt(d.border)||0,c+=parseInt(d.border)||0),d=d.offsetParent;while(d&&"body"!=d.tagName.toLowerCase());var e=a.style.paddingLeft?parseInt(a.style.paddingLeft):0,f=a.style.paddingTop?parseInt(a.style.paddingTop):0,g=a.style.borderLeftWidth?parseInt(a.style.borderLeftWidth):0,h=a.style.borderTopWidth?parseInt(a.style.borderTopWidth):0;return navigator.userAgent.indexOf("Firefox")>0&&(b+=parseInt(document.body.style.borderLeftWidth)||0,c+=parseInt(document.body.style.borderTopWidth)||0),[b+e+g,c+f+h]},RG.isFixed=function(a){for(var b=a,c=0;b&&"body"!=b.tagName.toLowerCase()&&c<99;){if("fixed"==b.style.position)return b;b=b.offsetParent}return!1},RG.register=RG.Register=function(a){a.Get("chart.noregister")||(RGraph.ObjectRegistry.Add(a),a.Set("chart.noregister",!0))},RG.redraw=RG.Redraw=function(){for(var a=RGraph.ObjectRegistry.objects.byCanvasID,b=document.getElementsByTagName("canvas"),c=0,d=b.length;c<d;++c)b[c].__object__&&b[c].__object__.isRGraph&&(b[c].noclear||RGraph.clear(b[c],arguments[0]?arguments[0]:null));for(var c=0,d=a.length;c<d;++c)if(a[c]){a[c][0];a[c][1].Draw()}},RG.redrawCanvas=RG.RedrawCanvas=function(a){var b=RG.ObjectRegistry.getObjectsByCanvasID(a.id);if(!arguments[1]||"boolean"==typeof arguments[1]&&0==!arguments[1]){var c=arguments[2]||a.__object__.get("clearto")||"transparent";RG.clear(a,c)}for(var d=0,e=b.length;d<e;++d)b[d]&&b[d]&&b[d].isRGraph&&b[d].Draw()},RG.Background.draw=RG.background.draw=RG.background.Draw=function(a){var b=a.canvas,c=a.context,d=a.properties,e=0,f=a.gutterLeft,g=a.gutterRight,h=a.gutterTop,i=a.gutterBottom,j=d["chart.variant"];if(c.fillStyle=d["chart.text.color"],"3d"==j&&(c.save(),c.translate(d["chart.variant.threed.offsetx"],-1*d["chart.variant.threed.offsety"])),"string"==typeof d["chart.title.xaxis"]&&d["chart.title.xaxis"].length){var k=d["chart.text.size"]+2,l=d["chart.text.font"],m=d["chart.title.xaxis.bold"];"number"==typeof d["chart.title.xaxis.size"]&&(k=d["chart.title.xaxis.size"]),"string"==typeof d["chart.title.xaxis.font"]&&(l=d["chart.title.xaxis.font"]);var n=(b.width-f-g)/2+f,o=b.height-i+25;"number"==typeof d["chart.title.xaxis.pos"]&&(o=b.height-i*d["chart.title.xaxis.pos"]),"number"==typeof d["chart.title.xaxis.x"]&&(n=d["chart.title.xaxis.x"]),"number"==typeof d["chart.title.xaxis.y"]&&(o=d["chart.title.xaxis.y"]),RG.text2(d["chart.text.accessible"]?a.context:c,{font:l,size:k,x:n,y:o,text:d["chart.title.xaxis"],halign:"center",valign:"center",bold:m,color:d["chart.title.xaxis.color"]||"black",tag:"title xaxis"})}if("string"==typeof d["chart.title.yaxis"]&&d["chart.title.yaxis"].length){var k=d["chart.text.size"]+2,l=d["chart.text.font"],p=270,m=d["chart.title.yaxis.bold"],q=d["chart.title.yaxis.color"];if("number"==typeof d["chart.title.yaxis.pos"])var r=d["chart.title.yaxis.pos"]*f;else var r=(f-25)/f*f;"number"==typeof d["chart.title.yaxis.size"]&&(k=d["chart.title.yaxis.size"]),"string"==typeof d["chart.title.yaxis.font"]&&(l=d["chart.title.yaxis.font"]),"right"==d["chart.title.yaxis.align"]||"right"==d["chart.title.yaxis.position"]||"hbar"===a.type&&"right"===d["chart.yaxispos"]&&"undefined"==typeof d["chart.title.yaxis.align"]&&"undefined"==typeof d["chart.title.yaxis.position"]?(p=90,r=d["chart.title.yaxis.pos"]?b.width-g+d["chart.title.yaxis.pos"]*g:b.width-g+d["chart.text.size"]+5):r=r;var s=(b.height-h-i)/2+h;"number"==typeof d["chart.title.yaxis.x"]&&(r=d["chart.title.yaxis.x"]),"number"==typeof d["chart.title.yaxis.y"]&&(s=d["chart.title.yaxis.y"]),c.fillStyle=q,RG.text2(d["chart.text.accessible"]?a.context:c,{font:l,size:k,x:r,y:s,valign:"center",halign:"center",angle:p,bold:m,text:d["chart.title.yaxis"],tag:"title yaxis",accessible:!1})}var t=d["chart.background.color"];t&&(c.fillStyle=t,c.fillRect(f+.5,h+.5,b.width-f-g,b.height-h-i));var u=d["chart.ylabels.count"]||5,v=(b.height-i-h)/u;c.beginPath(),c.fillStyle=d["chart.background.barcolor1"],c.strokeStyle=c.fillStyle,e=b.height-i;for(var w=0;w<u;w+=2)c.rect(f,w*v+h,b.width-f-g,v);c.fill(),c.beginPath(),c.fillStyle=d["chart.background.barcolor2"],c.strokeStyle=c.fillStyle;for(var w=1;w<u;w+=2)c.rect(f,w*v+h,b.width-f-g,v);c.fill(),c.beginPath();var y=function(a,j,k){if(d["chart.background.grid"]){if(d["chart.background.grid.autofit.numhlines"]+=1e-4,d["chart.background.grid.autofit"]){if(d["chart.background.grid.autofit.align"])if("hbar"===a.type&&a.set("chart.background.grid.autofit.numhlines",a.data.length),"line"===a.type)"number"==typeof d["chart.background.grid.autofit.numvlines"]||(d["chart.labels"]&&d["chart.labels"].length?a.Set("chart.background.grid.autofit.numvlines",d["chart.labels"].length-1):a.Set("chart.background.grid.autofit.numvlines",a.data[0].length-1));else if("waterfall"===a.type)a.set("backgroundGridAutofitNumvlines",a.data.length+(d["chart.total"]?1:0));else if("bar"!==a.type&&"scatter"!==a.type||!(d["chart.labels"]&&d["chart.labels"].length||"bar"===a.type))"gantt"===a.type?("number"==typeof a.get("chart.background.grid.autofit.numvlines")||a.set("chart.background.grid.autofit.numvlines",d["chart.xmax"]),a.set("chart.background.grid.autofit.numhlines",a.data.length)):"hbar"===a.type&&RG.isNull(d["chart.background.grid.autofit.numhlines"])&&a.set("chart.background.grid.autofit.numhlines",a.data.length);else{var l=d["chart.labels"]&&d["chart.labels"].length||a.data.length;a.set({backgroundGridAutofitNumvlines:l})}var m=(j.width-f-g)/d["chart.background.grid.autofit.numvlines"],n=(j.height-h-i)/d["chart.background.grid.autofit.numhlines"];a.Set("chart.background.grid.vsize",m),a.Set("chart.background.grid.hsize",n)}if(c.beginPath(),k.lineWidth=d["chart.background.grid.width"]?d["chart.background.grid.width"]:1,k.strokeStyle=d["chart.background.grid.color"],d["chart.background.grid.dashed"]&&"function"==typeof k.setLineDash&&k.setLineDash([3,5]),d["chart.background.grid.dotted"]&&"function"==typeof k.setLineDash&&k.setLineDash([1,3]),c.beginPath(),d["chart.background.grid.hlines"]){e=j.height-i;var n=d["chart.background.grid.hsize"];for(s=h;s<=e;s+=n)k.moveTo(f,ma.round(s)),k.lineTo(b.width-g,ma.round(s))}if(d["chart.background.grid.vlines"]){var o=j.width-g,m=d["chart.background.grid.vsize"];for(x=f;ma.round(x)<=o;x+=m)k.moveTo(ma.round(x),h),k.lineTo(ma.round(x),b.height-i)}d["chart.background.grid.border"]&&(k.strokeStyle=d["chart.background.grid.color"],k.strokeRect(ma.round(f),ma.round(h),b.width-f-g,b.height-h-i))}k.stroke(),k.beginPath(),k.closePath()};if(RG.cachedDraw(a,a.uid+"_background",y),"3d"==j&&c.restore(),"function"==typeof c.setLineDash&&c.setLineDash([1,0]),c.stroke(),"string"==typeof a.properties["chart.title"]){var d=a.properties;RG.drawTitle(a,d["chart.title"],a.gutterTop,null,d["chart.title.size"]?d["chart.title.size"]:d["chart.text.size"]+2,a)}},RG.numberFormat=RG.number_format=function(a,b){var f,e=(a.canvas,a.context,a.properties),g=arguments[2]?String(arguments[2]):"",h=arguments[3]?String(arguments[3]):"",i="",j="",k="string"==typeof e["chart.scale.point"]?e["chart.scale.point"]:".",l="string"==typeof e["chart.scale.thousand"]?e["chart.scale.thousand"]:",";RegExp.$1="";var f,m;if("function"==typeof e["chart.scale.formatter"])return e["chart.scale.formatter"](a,b);if(String(b).indexOf("e")>0)return String(g+String(b)+h);if(b=String(b),b.indexOf(".")>0){var n=b;b=b.replace(/\.(.*)/,""),j=n.replace(/(.*)\.(.*)/,"$2")}var o=l;for(f=b.length-1,m=0;f>=0;m++,f--){var q=b.charAt(f);m%3==0&&0!=m&&(i+=o),i+=q}var r=i;for(i="",f=r.length-1;f>=0;f--)i+=r.charAt(f);return 0==i.indexOf("-"+e["chart.scale.thousand"])&&(i="-"+i.substr(("-"+e["chart.scale.thousand"]).length)),j.length&&(i=i+k+j,j="",RegExp.$1=""),"-"==i.charAt(0)&&(i=i.replace(/-/,""),g="-"+g),g+i+h},RG.drawBars=RG.DrawBars=function(a){var b=a.properties,c=a.context,d=a.canvas,e=b["chart.background.hbars"];if(null!==e)for(c.beginPath(),i=0,len=e.length;i<len;++i){var f=e[i][0],g=e[i][1],h=e[i][2];RG.is_null(f)&&(f=a.scale2.max),f>a.scale2.max&&(f=a.scale2.max),RG.is_null(g)&&(g=a.scale2.max-f),f+g>a.scale2.max&&(g=a.scale2.max-f),f+g<-1*a.scale2.max&&(g=-1*a.scale2.max-f),"center"==b["chart.xaxispos"]&&f==a.scale2.max&&g<a.scale2.max*-2&&(g=a.scale2.max*-2);var j=b["chart.gutter.left"],k=a.getYCoord(f),l=d.width-b["chart.gutter.left"]-b["chart.gutter.right"],m=a.getYCoord(f+g)-k;RG.ISOPERA!=-1&&"center"==b["chart.xaxispos"]&&m<0&&(m*=-1,k-=m),"top"==b["chart.xaxispos"]&&(k=d.height-k,m*=-1),c.fillStyle=h,c.fillRect(j,k,l,m)}},RG.drawInGraphLabels=RG.DrawInGraphLabels=function(a){var c=(a.canvas,a.context),d=a.properties,e=d["chart.labels.ingraph"],f=[];if(e){for(var j=0,k=e.length;j<k;j+=1)if("number"==typeof e[j])for(var l=0;l<e[j];++l)f.push(null);else"string"==typeof e[j]||"object"==typeof e[j]?f.push(e[j]):f.push("");if(RG.noShadow(a),f&&f.length>0)for(var j=0,k=f.length;j<k;j+=1)if(f[j]){var m=a.coords[j];if(m&&m.length>0){var n="bar"==a.type?m[0]+m[2]/2:m[0],o="bar"==a.type?m[1]+m[3]/2:m[1],p="number"==typeof f[j][4]?f[j][4]:25;if(c.beginPath(),c.fillStyle="black",c.strokeStyle="black","bar"===a.type){if("top"==a.Get("chart.xaxispos")&&(p*=-1),"dot"==d["chart.variant"]){c.moveTo(ma.round(n),a.coords[j][1]-5),c.lineTo(ma.round(n),a.coords[j][1]-5-p);var q=ma.round(n),r=a.coords[j][1]-5-p}else if("arrow"==d["chart.variant"]){c.moveTo(ma.round(n),a.coords[j][1]-5),c.lineTo(ma.round(n),a.coords[j][1]-5-p);var q=ma.round(n),r=a.coords[j][1]-5-p}else{c.arc(ma.round(n),o,2.5,0,6.28,0),c.moveTo(ma.round(n),o),c.lineTo(ma.round(n),o-p);var q=ma.round(n),r=o-p}c.stroke(),c.fill()}else{if("object"==typeof f[j]&&"number"==typeof f[j][3]&&f[j][3]==-1){c.moveTo(ma.round(n),o+5),c.lineTo(ma.round(n),o+5+p),c.stroke(),c.beginPath(),c.moveTo(ma.round(n),o+5),c.lineTo(ma.round(n)-3,o+10),c.lineTo(ma.round(n)+3,o+10),c.closePath();var q=n,r=o+5+p}else{var q=n,r=o-5-p;c.moveTo(ma.round(n),o-5),c.lineTo(ma.round(n),o-5-p),c.stroke(),c.beginPath(),c.moveTo(ma.round(n),o-5),c.lineTo(ma.round(n)-3,o-10),c.lineTo(ma.round(n)+3,o-10),c.closePath()}c.fill()}c.beginPath(),c.fillStyle="object"==typeof f[j]&&"string"==typeof f[j][1]?f[j][1]:"black",RG.text2(a,{font:d["chart.text.font"],size:d["chart.text.size"],x:q,y:r+(a.properties["chart.text.accessible"]?2:0),text:"object"==typeof f[j]&&"string"==typeof f[j][0]?f[j][0]:f[j],valign:"bottom",halign:"center",bounding:!0,"bounding.fill":"object"==typeof f[j]&&"string"==typeof f[j][2]?f[j][2]:"white",tag:"labels ingraph"}),c.fill()}}}},RG.fixEventObject=RG.FixEventObject=function(a){if(RG.ISOLD){var a=event;a.pageX=event.clientX+doc.body.scrollLeft,a.pageY=event.clientY+doc.body.scrollTop,a.target=event.srcElement,!doc.body.scrollTop&&doc.documentElement.scrollTop&&(a.pageX+=parseInt(doc.documentElement.scrollLeft),a.pageY+=parseInt(doc.documentElement.scrollTop))}return a.stopPropagation||(a.stopPropagation=function(){window.event.cancelBubble=!0}),a},RG.hideCrosshairCoords=RG.HideCrosshairCoords=function(){var a=RG.Registry.Get("chart.coordinates.coords.div");if(a&&1==a.style.opacity&&a.__object__.Get("chart.crosshairs.coords.fadeout")){var b=RG.Registry.Get("chart.coordinates.coords.div").style;setTimeout(function(){b.opacity=.9},25),setTimeout(function(){b.opacity=.8},50),setTimeout(function(){b.opacity=.7},75),setTimeout(function(){b.opacity=.6},100),setTimeout(function(){b.opacity=.5},125),setTimeout(function(){b.opacity=.4},150),setTimeout(function(){b.opacity=.3},175),setTimeout(function(){b.opacity=.2},200),setTimeout(function(){b.opacity=.1},225),setTimeout(function(){b.opacity=0},250),setTimeout(function(){b.display="none"},275)}},RG.draw3DAxes=RG.Draw3DAxes=function(a){var b=a.properties,c=a.context,d=a.canvas,e=a.gutterLeft,f=a.gutterRight,g=a.gutterTop,h=a.gutterBottom,i=b["chart.xaxispos"],j=d.height-g-h,k=j/2,l=b["chart.variant.threed.offsetx"],m=b["chart.variant.threed.offsety"],n=b["chart.variant.threed.xaxis"],o=b["chart.variant.threed.yaxis"];if(o&&RG.draw3DYAxis(a),n)if("center"===i)RG.path2(c,"b m % % l % % l % % l % % c s #aaa f #ddd",e,g+k,e+l,g+k-m,d.width-f+l,g+k-m,d.width-f,g+k);else{if("hbar"===a.type)var p=a.canvas.height-a.properties["chart.gutter.bottom"];else var p=a.getYCoord(0);RG.path2(c,"m % % l % % l % % l % % c s #aaa f #ddd",e,p,e+l,p-m,d.width-f+l,p-m,d.width-f,p)}},RG.draw3DYAxis=function(a){var b=a.properties,c=a.context,d=a.canvas,e=a.gutterLeft,f=a.gutterRight,g=a.gutterTop,h=a.gutterBottom,l=(b["chart.xaxispos"],d.height-g-h,b["chart.variant.threed.offsetx"]),m=b["chart.variant.threed.offsety"];if("hbar"!==a.type&&"bar"!==a.type||"center"!==b["chart.yaxispos"])if("hbar"!==a.type&&"bar"!==a.type||"right"!==b["chart.yaxispos"])var n=e;else var n=d.width-f;else var n=(d.width-e-f)/2+e;RG.path2(c,"b m % % l % % l % % l % % s #aaa f #ddd",n,g,n+l,g-m,n+l,d.height-h-m,n,d.height-h)},RG.strokedCurvyRect=function(a,b,c,d,e){var f=arguments[5]?arguments[5]:3,g=!(!arguments[6]&&null!=arguments[6]),h=!(!arguments[7]&&null!=arguments[7]),i=!(!arguments[8]&&null!=arguments[8]),j=!(!arguments[9]&&null!=arguments[9]);a.beginPath(),a.moveTo(b+(g?f:0),c),a.lineTo(b+d-(h?f:0),c),h&&a.arc(b+d-f,c+f,f,RG.PI+RG.HALFPI,RG.TWOPI,!1),a.lineTo(b+d,c+e-(i?f:0)),i&&a.arc(b+d-f,c-f+e,f,RG.TWOPI,RG.HALFPI,!1),a.lineTo(b+(j?f:0),c+e),j&&a.arc(b+f,c-f+e,f,RG.HALFPI,RG.PI,!1),a.lineTo(b,c+(g?f:0)),g&&a.arc(b+f,c+f,f,RG.PI,RG.PI+RG.HALFPI,!1),a.stroke()},RG.filledCurvyRect=function(a,b,c,d,e){var f=arguments[5]?arguments[5]:3,g=!(!arguments[6]&&null!=arguments[6]),h=!(!arguments[7]&&null!=arguments[7]),i=!(!arguments[8]&&null!=arguments[8]),j=!(!arguments[9]&&null!=arguments[9]);a.beginPath(),g?(a.moveTo(b+f,c+f),a.arc(b+f,c+f,f,RG.PI,RG.PI+RG.HALFPI,!1)):a.fillRect(b,c,f,f),h?(a.moveTo(b+d-f,c+f),a.arc(b+d-f,c+f,f,RG.PI+RG.HALFPI,0,!1)):(a.moveTo(b+d-f,c),a.fillRect(b+d-f,c,f,f)),i?(a.moveTo(b+d-f,c+e-f),a.arc(b+d-f,c-f+e,f,0,RG.HALFPI,!1)):(a.moveTo(b+d-f,c+e-f),a.fillRect(b+d-f,c+e-f,f,f)),j?(a.moveTo(b+f,c+e-f),a.arc(b+f,c-f+e,f,RG.HALFPI,RG.PI,!1)):(a.moveTo(b,c+e-f),a.fillRect(b,c+e-f,f,f)),a.fillRect(b+f,c,d-f-f,e),a.fillRect(b,c+f,f+1,e-f-f),a.fillRect(b+d-f-1,c+f,f+1,e-f-f),a.fill()},RG.hideZoomedCanvas=RG.HideZoomedCanvas=function(){var a=10,b=15;if("object"==typeof RG.zoom_image){var c=RG.zoom_image.obj,d=c.properties;if(d["chart.zoom.fade.out"]){for(var e=b,f=1;e>=0;--e,++f)"object"==typeof RG.zoom_image&&setTimeout("RGraph.zoom_image.style.opacity = "+String(e/10),f*a);"object"==typeof RG.zoom_background&&setTimeout("RGraph.zoom_background.style.opacity = "+String(e/b),f*a)}"object"==typeof RG.zoom_image&&setTimeout("RGraph.zoom_image.style.display = 'none'",d["chart.zoom.fade.out"]?b*a+10:0),"object"==typeof RG.zoom_background&&setTimeout("RGraph.zoom_background.style.display = 'none'",d["chart.zoom.fade.out"]?b*a+10:0)}},RG.addCustomEventListener=RG.AddCustomEventListener=function(a,b,c){return"undefined"==typeof RG.events[a.uid]&&(RG.events[a.uid]=[]),"on"!==b.substr(0,2)&&(b="on"+b),RG.events[a.uid].push([a,b,c]),RG.events[a.uid].length-1},RG.fireCustomEvent=RG.FireCustomEvent=function(a,b){if(a&&a.isRGraph){b.match(/(on)?mouseout/)&&"function"==typeof a.properties["chart.events.mouseout"]&&a.properties["chart.events.mouseout"](a),a[b]&&a[b](a);var c=a.uid;if("string"==typeof c&&"object"==typeof RG.events&&"object"==typeof RG.events[c]&&RG.events[c].length>0)for(var d=0;d<RG.events[c].length;++d)RG.events[c][d]&&RG.events[c][d][1]===b&&RG.events[c][d][2](a)}},RGraph.removeAllCustomEventListeners=RGraph.RemoveAllCustomEventListeners=function(){var a=arguments[0];a&&RG.events[a]?RG.events[a]=[]:RG.events=[]},RG.removeCustomEventListener=RG.RemoveCustomEventListener=function(a,b){"object"==typeof RG.events&&"object"==typeof RG.events[a.id]&&"object"==typeof RG.events[a.id][b]&&(RG.events[a.id][b]=null)},RG.drawBackgroundImage=RG.DrawBackgroundImage=function(a){var b=a.properties,c=a.canvas,d=a.context;if("string"==typeof b["chart.background.image"]){if("undefined"==typeof c.__rgraph_background_image__){var e=new Image;e.__object__=a,e.__canvas__=c,e.__context__=d,e.src=a.Get("chart.background.image"),c.__rgraph_background_image__=e}else e=c.__rgraph_background_image__;e.onload=function(){a.__rgraph_background_image_loaded__=!0,RG.clear(c),RG.redrawCanvas(c)};var f=a.gutterLeft,g=a.gutterRight,h=a.gutterTop,i=a.gutterBottom,j=b["chart.background.image.stretch"],k=b["chart.background.image.align"];if("string"==typeof k){if(k.indexOf("right")!=-1)var l=c.width-(b["chart.background.image.w"]||e.width)-g;else var l=f;if(k.indexOf("bottom")!=-1)var m=c.height-(b["chart.background.image.h"]||e.height)-i;else var m=h}else var l=f||25,m=h||25;var l="number"==typeof b["chart.background.image.x"]?b["chart.background.image.x"]:l,m="number"==typeof b["chart.background.image.y"]?b["chart.background.image.y"]:m,n=j?c.width-f-g:e.width,o=j?c.height-h-i:e.height;"number"==typeof b["chart.background.image.w"]&&(n=b["chart.background.image.w"]),"number"==typeof b["chart.background.image.h"]&&(o=b["chart.background.image.h"]);var p=d.globalAlpha;d.globalAlpha=b["chart.background.image.alpha"],d.drawImage(e,l,m,n,o),d.globalAlpha=p}},RG.hasTooltips=function(a){var b=a.properties;if("object"==typeof b["chart.tooltips"]&&b["chart.tooltips"]){for(var c=0,d=b["chart.tooltips"].length;c<d;++c)if(!RG.is_null(a.Get("chart.tooltips")[c]))return!0}else if("function"==typeof b["chart.tooltips"])return!0;return!1},RG.createUID=RG.CreateUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*ma.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},RG.OR.add=RG.OR.Add=function(a){var b=a.uid,c=a.canvas.id;RG.ObjectRegistry.objects.byUID.push([b,a]),RG.ObjectRegistry.objects.byCanvasID.push([c,a])},RG.OR.remove=RG.OR.Remove=function(a){for(var c=(a.id,a.uid),d=0;d<RG.ObjectRegistry.objects.byUID.length;++d)RG.ObjectRegistry.objects.byUID[d]&&RG.ObjectRegistry.objects.byUID[d][1].uid==c&&(RG.ObjectRegistry.objects.byUID[d]=null);for(var d=0;d<RG.ObjectRegistry.objects.byCanvasID.length;++d)RG.ObjectRegistry.objects.byCanvasID[d]&&RG.ObjectRegistry.objects.byCanvasID[d][1]&&RG.ObjectRegistry.objects.byCanvasID[d][1].uid==c&&(RG.ObjectRegistry.objects.byCanvasID[d]=null)},RG.OR.clear=RG.OR.Clear=function(){if(arguments[0])for(var a="object"==typeof arguments[0]?arguments[0].id:arguments[0],b=RG.ObjectRegistry.getObjectsByCanvasID(a),c=0,d=b.length;c<d;++c)RG.ObjectRegistry.remove(b[c]);else RG.ObjectRegistry.objects={},RG.ObjectRegistry.objects.byUID=[],RG.ObjectRegistry.objects.byCanvasID=[]},RG.OR.list=RG.OR.List=function(){for(var a=[],b=0,c=RG.ObjectRegistry.objects.byUID.length;b<c;++b)RG.ObjectRegistry.objects.byUID[b]&&a.push(RG.ObjectRegistry.objects.byUID[b][1].type);return arguments[0]?a:void $p(a)},RG.OR.clearByType=RG.OR.ClearByType=function(a){for(var b=RG.ObjectRegistry.objects.byUID,c=0,d=b.length;c<d;++c)if(b[c]){var f=(b[c][0],b[c][1]);f&&f.type==a&&RG.ObjectRegistry.remove(f)}},RG.OR.iterate=RG.OR.Iterate=function(a){for(var b=RGraph.ObjectRegistry.objects.byUID,c=0,d=b.length;c<d;++c)if("string"==typeof arguments[1])for(var e=arguments[1].split(/,/),f=0,g=e.length;f<g;++f)e[f]==b[c][1].type&&a(b[c][1]);else a(b[c][1])},RG.OR.getObjectsByCanvasID=function(a){for(var b=RG.ObjectRegistry.objects.byCanvasID,c=[],d=0,e=b.length;d<e;++d)b[d]&&b[d][0]==a&&c.push(b[d][1]);return c},RG.OR.firstbyxy=RG.OR.getFirstObjectByXY=RG.OR.getObjectByXY=function(a){for(var b=a.target,d=RG.ObjectRegistry.getObjectsByCanvasID(b.id),e=d.length-1;e>=0;--e){var f=d[e].getObjectByXY(a);if(f)return f}},RG.OR.getObjectsByXY=function(a){for(var b=a.target,c=[],d=RG.ObjectRegistry.getObjectsByCanvasID(b.id),e=d.length-1;e>=0;--e){var f=d[e].getObjectByXY(a);f&&c.push(f)}return c},RG.OR.get=RG.OR.getObjectByUID=function(a){for(var b=RG.ObjectRegistry.objects.byUID,c=0,d=b.length;c<d;++c)if(b[c]&&b[c][1].uid==a)return b[c][1]},RG.OR.bringToFront=function(a){var b="undefined"==typeof arguments[1]||arguments[1];RG.ObjectRegistry.remove(a),RG.ObjectRegistry.add(a),b&&RG.redrawCanvas(a.canvas)},RG.OR.type=RG.OR.getObjectsByType=function(a){for(var b=RG.ObjectRegistry.objects.byUID,c=[],d=0,e=b.length;d<e;++d)b[d]&&b[d][1]&&b[d][1].type&&b[d][1].type&&b[d][1].type==a&&c.push(b[d][1]);return c},RG.OR.first=RG.OR.getFirstObjectByType=function(a){for(var b=RG.ObjectRegistry.objects.byUID,c=0,d=b.length;c<d;++c)if(b[c]&&b[c][1]&&b[c][1].type==a)return b[c][1];return null},RG.getAngleByXY=function(a,b,c,d){var e=ma.atan((d-b)/(c-a));return e=ma.abs(e),c>=a&&d>=b?e+=RG.TWOPI:c>=a&&d<b?e=RG.HALFPI-e+(RG.PI+RG.HALFPI):c<a&&d<b?e+=RG.PI:e=RG.PI-e,e>RG.TWOPI&&(e-=RG.TWOPI),e},RG.getHypLength=function(a,b,c,d){var e=ma.sqrt((c-a)*(c-a)+(d-b)*(d-b));return e},RG.getRadiusEndPoint=function(a,b,c,d){var e=a+ma.cos(c)*d,f=b+ma.sin(c)*d;return[e,f]},RG.installEventListeners=RG.InstallEventListeners=function(a){var b=a.properties;RG.ISOLD||(RG.installCanvasClickListener?(RG.installWindowMousedownListener(a),RG.installWindowMouseupListener(a),RG.installCanvasMousemoveListener(a),RG.installCanvasMouseupListener(a),RG.installCanvasMousedownListener(a),RG.installCanvasClickListener(a)):(RG.hasTooltips(a)||b["chart.adjustable"]||b["chart.annotatable"]||b["chart.contextmenu"]||b["chart.resizable"]||b["chart.key.interactive"]||b["chart.events.click"]||b["chart.events.mousemove"]||"function"==typeof a.onclick||"function"==typeof a.onmousemove)&&alert("[RGRAPH] You appear to have used dynamic features but not included the file: RGraph.common.dynamic.js"))},RG.pr=function(a){var b=arguments[2]?arguments[2]:"    ",c="",d="number"==typeof arguments[3]?arguments[3]:0;if(d>=5)return"";switch(typeof a){case"string":c+=a+" ("+typeof a+", "+a.length+")";break;case"number":c+=a+" ("+typeof a+")";break;case"boolean":c+=a+" ("+typeof a+")";break;case"function":c+="function () {}";break;case"undefined":c+="undefined";break;case"null":c+="null";break;case"object":if(RGraph.is_null(a))c+=b+"null\n";else{c+=b+"Object {\n";for(j in a)c+=b+"    "+j+" => "+RGraph.pr(a[j],!0,b+"    ",d+1)+"\n";c+=b+"}"}break;default:c+="Unknown type: "+typeof a}return arguments[1]||alert(c),c},RG.dashedLine=RG.DashedLine=function(a,b,c,d,e){var f=5;"number"==typeof arguments[5]&&(f=arguments[5]);var g=d-b,h=e-c,i=ma.floor(ma.sqrt(g*g+h*h)/f),j=g/i,k=h/i,l=0;do l%2==0&&l>0?a.lineTo(b,c):a.moveTo(b,c),b+=j,c+=k;while(l++<=i)},RG.AJAX=function(a,b){if(window.XMLHttpRequest)var c=new XMLHttpRequest;else if(window.ActiveXObject)var c=new ActiveXObject("Microsoft.XMLHTTP");c.onreadystatechange=function(){4==this.readyState&&200==this.status&&(this.__user_callback__=b,this.__user_callback__(this.responseText))},c.open("GET",a,!0),c.send()},RG.AJAX.POST=function(a,b,c){var d=[];if(window.XMLHttpRequest)var e=new XMLHttpRequest;else if(window.ActiveXObject)var e=new ActiveXObject("Microsoft.XMLHTTP");e.onreadystatechange=function(){4==this.readyState&&200==this.status&&(this.__user_callback__=c,this.__user_callback__(this.responseText))},e.open("POST",a,!0),
    e.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(i in b)"string"==typeof i&&d.push(i+"="+encodeURIComponent(b[i]));e.send(d.join("&"))},RG.AJAX.getNumber=function(a,b){RG.AJAX(a,function(){var a=parseFloat(this.responseText);b(a)})},RG.AJAX.getString=function(a,b){RG.AJAX(a,function(){var a=String(this.responseText);b(a)})},RG.AJAX.getJSON=function(url,callback){RG.AJAX(url,function(){var json=eval("("+this.responseText+")");callback(json)})},RG.AJAX.getCSV=function(a,b){var c=arguments[2]?arguments[2]:",";RG.AJAX(a,function(){for(var a=new RegExp(c),d=this.responseText.split(a),e=0,f=d.length;e<f;++e)d[e]=parseFloat(d[e]);b(d)})},RG.rotateCanvas=RG.RotateCanvas=function(a,b,c,d){var e=a.getContext("2d");e.translate(b,c),e.rotate(d),e.translate(0-b,0-c)},RG.measureText=RG.MeasureText=function(a,b,c,d){"undefined"==typeof RG.measuretext_cache&&(RG.measuretext_cache=[]);var e=a+":"+b+":"+c+":"+d;if("object"==typeof RG.measuretext_cache&&RG.measuretext_cache[e])return RG.measuretext_cache[e];if(RG.measuretext_cache["text-div"]){if(RG.measuretext_cache["text-div"])var f=RG.measuretext_cache["text-div"]}else{var f=document.createElement("DIV");f.style.position="absolute",f.style.top="-100px",f.style.left="-100px",document.body.appendChild(f),RG.measuretext_cache["text-div"]=f}f.innerHTML=a.replace(/\r\n/g,"<br />"),f.style.fontFamily=c,f.style.fontWeight=b?"bold":"normal",f.style.fontSize=(d||12)+"pt";var d=[f.offsetWidth,f.offsetHeight];return RG.measuretext_cache[e]=d,d},RG.text2=RG.Text2=function(a,b){function c(){String(b.size).toLowerCase().indexOf("italic")!==-1&&(b.size=b.size.replace(/ *italic +/,""),b.italic=!0);var c=ma.abs(parseInt(b.x))+"_"+ma.abs(parseInt(b.y))+"_"+String(b.text).replace(/[^a-zA-Z0-9]+/g,"_")+"_"+a.canvas.id;if(e.rgraph_domtext_wrapper)f=e.rgraph_domtext_wrapper;else{var f=document.createElement("div");f.id=e.id+"_rgraph_domtext_wrapper",f.className="rgraph_domtext_wrapper",f.style.overflow=0!=a.properties["chart.text.accessible.overflow"]&&"hidden"!=a.properties["chart.text.accessible.overflow"]?"visible":"hidden",f.style.width=e.offsetWidth+"px",f.style.height=e.offsetHeight+"px",f.style.cssFloat=e.style.cssFloat,f.style.display=e.style.display||"inline-block",f.style.position=e.style.position||"relative",f.style.left=e.style.left,f.style.top=e.style.top,f.style.width=e.width+"px",f.style.height=e.height+"px",e.style.position="absolute",e.style.left=0,e.style.top=0,e.style.display="inline",e.style.cssFloat="none","bar"!==a.type&&"bipolar"!==a.type&&"hbar"!==a.type||"3d"!==a.properties["chart.variant"]||(f.style.transform="skewY(5.7deg)"),e.parentNode.insertBefore(f,e),e.parentNode.removeChild(e),f.appendChild(e),e.rgraph_domtext_wrapper=f}var g={size:12,font:"Arial",italic:"normal",bold:"normal",valign:"bottom",halign:"left",marker:!0,color:d.fillStyle,bounding:{enabled:!1,fill:"rgba(255,255,255,0.7)",stroke:"#666"}};if(b.text=String(b.text).replace(/\r?\n/g,"[[RETURN]]"),"undefined"==typeof RG.text2.domNodeCache&&(RG.text2.domNodeCache=new Array),"undefined"==typeof RG.text2.domNodeCache[a.id]&&(RG.text2.domNodeCache[a.id]=new Array),"undefined"==typeof RG.text2.domNodeDimensionCache&&(RG.text2.domNodeDimensionCache=new Array),"undefined"==typeof RG.text2.domNodeDimensionCache[a.id]&&(RG.text2.domNodeDimensionCache[a.id]=new Array),RG.text2.domNodeCache[a.id]&&RG.text2.domNodeCache[a.id][c]){h=RG.text2.domNodeCache[a.id][c],h.style.display="inline";var k=RG.text2.domNodeDimensionCache[a.id][c].width,l=RG.text2.domNodeDimensionCache[a.id][c].height,m=RG.text2.domNodeDimensionCache[a.id][c].top,n=RG.text2.domNodeDimensionCache[a.id][c].left}else{var h=document.createElement("span");if(h.style.position="absolute",h.style.display="inline",h.style.left=b.x*(parseInt(e.offsetWidth)/parseInt(e.width))+"px",h.style.top=b.y*(parseInt(e.offsetHeight)/parseInt(e.height))+"px",h.style.color=b.color||g.color,h.style.fontFamily=b.font||g.font,h.style.fontWeight=b.bold?"bold":g.bold,h.style.fontStyle=b.italic?"italic":g.italic,h.style.fontSize=(b.size||g.size)+"pt",h.style.whiteSpace="nowrap",h.tag=b.tag,"number"==typeof b.angle&&0!==b.angle){RG.measureText(b.text,b.bold,b.font,b.size);h.style.transformOrigin="100% 50%",h.style.transform="rotate("+b.angle+"deg)"}h.style.textShadow="{1}px {2}px {3}px {4}".format(d.shadowOffsetX,d.shadowOffsetY,d.shadowBlur,d.shadowColor),b.bounding&&(h.style.border="1px solid "+(b["bounding.stroke"]||g.bounding.stroke),h.style.backgroundColor=b["bounding.fill"]||g.bounding.fill),"undefined"!=typeof a.properties["chart.text.accessible.pointerevents"]&&!a.properties["chart.text.accessible.pointerevents"]||"none"===a.properties["chart.text.accessible.pointerevents"]?h.style.pointerEvents="none":h.style.pointerEvents="auto",h.style.padding=b.bounding?"2px":null,h.__text__=b.text,h.innerHTML=b.text.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;"),h.innerHTML=h.innerHTML.replace(/\[\[RETURN\]\]/g,"<br />"),f.appendChild(h),b.halign=b.halign||"left",b.valign=b.valign||"bottom","right"===b.halign?(h.style.left=parseFloat(h.style.left)-h.offsetWidth+"px",h.style.textAlign="right"):"center"===b.halign&&(h.style.left=parseFloat(h.style.left)-h.offsetWidth/2+"px",h.style.textAlign="center"),"top"===b.valign||("center"===b.valign?h.style.top=parseFloat(h.style.top)-h.offsetHeight/2+"px":h.style.top=parseFloat(h.style.top)-h.offsetHeight+"px");var k=parseFloat(h.offsetWidth),l=parseFloat(h.offsetHeight),m=parseFloat(h.style.top),n=parseFloat(h.style.left);RG.text2.domNodeCache[a.id][c]=h,RG.text2.domNodeDimensionCache[a.id][c]={left:n,top:m,width:k,height:l},h.id=c}b.marker&&RG.path2(context,"b m % % l % % m % % l % % s",b.x-5,b.y,b.x+5,b.y,b.x,b.y-5,b.x,b.y+5),"drawing.text"===a.type&&(a.properties["chart.events.mousemove"]&&h.addEventListener("mousemove",function(b){a.properties["chart.events.mousemove"](b,a)},!1),a.properties["chart.events.click"]&&h.addEventListener("click",function(b){a.properties["chart.events.click"](b,a)},!1),a.properties["chart.tooltips"]&&h.addEventListener(a.properties["chart.tooltips.event"].indexOf("mousemove")!==-1?"mousemove":"click",function(c){RG.Registry.get("chart.tooltip")&&0===RG.Registry.get("chart.tooltip").__index__&&RG.Registry.get("chart.tooltip").__object__.uid==a.uid||(RG.hideTooltip(),RG.redraw(),RG.tooltip(a,a.properties["chart.tooltips"][0],b.x,b.y,0,c))},!1));var o={};return o.x=n,o.y=m,o.width=k,o.height=l,o.object=a,o.text=b.text,o.tag=b.tag,RG.text2.domNodeCache.reset=function(){if(arguments[0]){var a=RG.text2.domNodeCache[arguments[0].id];for(j in a){var b=RG.text2.domNodeCache[arguments[0].id][j];b&&b.parentNode&&b.parentNode.removeChild(b)}}else for(J in RG.text2.domNodeCache)for(j in RG.text2.domNodeCache[J])RG.text2.domNodeCache[J][j]&&RG.text2.domNodeCache[J][j].parentNode&&RG.text2.domNodeCache[J][j].parentNode.removeChild(RG.text2.domNodeCache[J][j])},RG.text2.find=function(a){var b,c=[],d="string"==typeof a.id?a.id:a.object.id;for(J in RG.text2.domNodeCache[d])if(b=RG.text2.domNodeCache[d][J],"string"!=typeof a.tag||a.tag!==b.tag){if("object"==typeof a.tag&&a.tag.constructor.toString().indexOf("RegExp")){var e=new RegExp(a.tag);if(e.test(b.tag)){c.push(b);continue}}if("string"!=typeof a.text||a.text!==b.__text__){if("object"==typeof a.text&&a.text.constructor.toString().indexOf("RegExp")){var e=new RegExp(a.text);if(e.test(b.__text__)){c.push(b);continue}}}else c.push(b)}else c.push(b);return c},o.node=h,a&&a.isRGraph&&a.coordsText&&a.coordsText.push(o),o}if(a&&a.isRGraph)var a=a,d=a.context,e=a.canvas;else if("string"==typeof a)var e=document.getElementById(a),d=e.getContext("2d"),a=e.__object__;else if("function"==typeof a.getContext)var e=a,d=e.getContext("2d"),a=e.__object__;else if(a.toString().indexOf("CanvasRenderingContext2D")!=-1||RGraph.ISIE8&&a.moveTo)var d=a,e=a.canvas,a=e.__object__;else if(RG.ISOLD&&a.fillText)var d=a,e=a.canvas,a=e.__object__;if("string"==typeof b.boundingFill&&(b["bounding.fill"]=b.boundingFill),"string"==typeof b.boundingStroke&&(b["bounding.stroke"]=b.boundingStroke),a&&a.properties["chart.text.accessible"]&&b.accessible!==!1)return c();var f=b.x,g=b.y,h=f,i=g,k=b.text,l="string"==typeof k?k.split(/\r?\n/g):"",m=l.length,n=b.font?b.font:"Arial",o=b.size?b.size:10,p=1.5*o,s=(b.bold,b.italic,b.halign?b.halign:"left"),t=b.valign?b.valign:"bottom",u="string"==typeof b.tag&&b.tag.length>0?b.tag:"",w=(b.marker,b.angle||0),x=b.bounding,y=b["bounding.stroke"]?b["bounding.stroke"]:"black",z=b["bounding.fill"]?b["bounding.fill"]:"rgba(255,255,255,0.7)",A=b["bounding.shadow"],B=b["bounding.shadow.color"]||"#ccc",C=b["bounding.shadow.blur"]||3,D=b["bounding.shadow.offsetx"]||3,E=b["bounding.shadow.offsety"]||3,F=b["bounding.linewidth"]||1,G={};if("string"==typeof b.color){var H=d.fillStyle;d.fillStyle=b.color}if("number"==typeof k&&(k=String(k)),"string"==typeof k){0!=w&&(d.save(),d.translate(f,g),d.rotate(ma.PI/180*w),f=0,g=0),d.font=(b.italic?"italic ":"")+(b.bold?"bold ":"")+o+"pt "+n;for(var I=0,J=0;J<m;++J)I=ma.max(I,d.measureText(l[J]).width);var K=p*m;if(b.marker){var L=10,M=d.strokeStyle;d.beginPath(),d.strokeStyle="red",d.moveTo(f,g-L),d.lineTo(f,g+L),d.moveTo(f-L,g),d.lineTo(f+L,g),d.stroke(),d.strokeStyle=M}if("center"==s){d.textAlign="center";var N=f-2-I/2}else if("right"==s){d.textAlign="right";var N=f-2-I}else{d.textAlign="left";var N=f-2}if("center"==t){d.textBaseline="middle",g-=1,g-=(m-1)/2*p;var O=g-p/2-2}else if("top"==t){d.textBaseline="top";var O=g-2}else{d.textBaseline="bottom",m>1&&(g-=(m-1)*p);var O=g-p-2}var P=I+4,Q=K+4;if(x){var R=d.lineWidth,S=d.strokeStyle,T=d.fillStyle,U=d.shadowColor,V=d.shadowBlur,W=d.shadowOffsetX,X=d.shadowOffsetY;d.lineWidth=F,d.strokeStyle=y,d.fillStyle=z,A&&(d.shadowColor=B,d.shadowBlur=C,d.shadowOffsetX=D,d.shadowOffsetY=E),d.strokeRect(N,O,P,Q),d.fillRect(N,O,P,Q),d.lineWidth=R,d.strokeStyle=S,d.fillStyle=T,d.shadowColor=U,d.shadowBlur=V,d.shadowOffsetX=W,d.shadowOffsetY=X}if(m>1)for(var J=0;J<m;++J)d.fillText(l[J],f,g+p*J);else d.fillText(k,f+.5,g+.5);return 0!=w&&(90==w?"left"==s?("bottom"==t&&(N=h-2,O=i-2,P=K+4,Q=I+4),"center"==t&&(N=h-K/2-2,O=i-2,P=K+4,Q=I+4),"top"==t&&(N=h-K-2,O=i-2,P=K+4,Q=I+4)):"center"==s?("bottom"==t&&(N=h-2,O=i-I/2-2,P=K+4,Q=I+4),"center"==t&&(N=h-K/2-2,O=i-I/2-2,P=K+4,Q=I+4),"top"==t&&(N=h-K-2,O=i-I/2-2,P=K+4,Q=I+4)):"right"==s&&("bottom"==t&&(N=h-2,O=i-I-2,P=K+4,Q=I+4),"center"==t&&(N=h-K/2-2,O=i-I-2,P=K+4,Q=I+4),"top"==t&&(N=h-K-2,O=i-I-2,P=K+4,Q=I+4)):180==w?"left"==s?("bottom"==t&&(N=h-I-2,O=i-2,P=I+4,Q=K+4),"center"==t&&(N=h-I-2,O=i-K/2-2,P=I+4,Q=K+4),"top"==t&&(N=h-I-2,O=i-K-2,P=I+4,Q=K+4)):"center"==s?("bottom"==t&&(N=h-I/2-2,O=i-2,P=I+4,Q=K+4),"center"==t&&(N=h-I/2-2,O=i-K/2-2,P=I+4,Q=K+4),"top"==t&&(N=h-I/2-2,O=i-K-2,P=I+4,Q=K+4)):"right"==s&&("bottom"==t&&(N=h-2,O=i-2,P=I+4,Q=K+4),"center"==t&&(N=h-2,O=i-K/2-2,P=I+4,Q=K+4),"top"==t&&(N=h-2,O=i-K-2,P=I+4,Q=K+4)):270==w&&("left"==s?("bottom"==t&&(N=h-K-2,O=i-I-2,P=K+4,Q=I+4),"center"==t&&(N=h-K/2-4,O=i-I-2,P=K+4,Q=I+4),"top"==t&&(N=h-2,O=i-I-2,P=K+4,Q=I+4)):"center"==s?("bottom"==t&&(N=h-K-2,O=i-I/2-2,P=K+4,Q=I+4),"center"==t&&(N=h-K/2-4,O=i-I/2-2,P=K+4,Q=I+4),"top"==t&&(N=h-2,O=i-I/2-2,P=K+4,Q=I+4)):"right"==s&&("bottom"==t&&(N=h-K-2,O=i-2,P=K+4,Q=I+4),"center"==t&&(N=h-K/2-2,O=i-2,P=K+4,Q=I+4),"top"==t&&(N=h-2,O=i-2,P=K+4,Q=I+4))),d.restore()),d.textBaseline="alphabetic",d.textAlign="left",G.x=N,G.y=O,G.width=P,G.height=Q,G.object=a,G.text=k,G.tag=u,a&&a.isRGraph&&a.coordsText&&a.coordsText.push(G),"string"==typeof H&&(d.fillStyle=H),G}},RG.sequentialIndexToGrouped=function(a,b){for(var c=0,d=0;--a>=0;)RG.is_null(b[c])?(c++,d=0):"number"!=typeof b[c]?(d++,d>=b[c].length&&(c++,d=0)):(c++,d=0);return[c,d]},RG.Highlight.rect=RG.Highlight.Rect=function(a,b){var d=(a.canvas,a.context),e=a.properties;e["chart.tooltips.highlight"]&&(d.lineWidth=1,d.beginPath(),d.strokeStyle=e["chart.highlight.stroke"],d.fillStyle=e["chart.highlight.fill"],d.rect(b.x,b.y,b.width,b.height),d.stroke(),d.fill())},RG.Highlight.point=RG.Highlight.Point=function(a,b){var c=a.properties,e=(a.canvas,a.context);if(c["chart.tooltips.highlight"]){e.beginPath(),e.strokeStyle=c["chart.highlight.stroke"],e.fillStyle=c["chart.highlight.fill"];var f=c["chart.highlight.point.radius"]||2;e.arc(b.x,b.y,f,0,RG.TWOPI,0),e.stroke(),e.fill()}},RG.parseDate=function(a){if(a=RG.trim(a),"now"===a&&(a=(new Date).toString()),a.match(/^(\d\d)(?:-|\/)(\d\d)(?:-|\/)(\d\d\d\d)(.*)$/)&&(a="{1}/{2}/{3}{4}".format(RegExp.$3,RegExp.$2,RegExp.$1,RegExp.$4)),a.match(/^(\d\d\d\d)(-|\/)(\d\d)(-|\/)(\d\d)( |T)(\d\d):(\d\d):(\d\d)$/)&&(a=RegExp.$1+"-"+RegExp.$3+"-"+RegExp.$5+"T"+RegExp.$7+":"+RegExp.$8+":"+RegExp.$9),a.match(/^\d\d\d\d-\d\d-\d\d$/)&&(a=a.replace(/-/g,"/")),a.match(/^\d\d:\d\d:\d\d$/)){var b=new Date,c=b.getDate(),d=b.getMonth()+1,e=b.getFullYear();1===String(d).length&&(d="0"+d),1===String(c).length&&(c="0"+c),a=e+"/"+d+"/"+c+" "+a}return Date.parse(a)},RG.resetColorsToOriginalValues=function(a){if(a.original_colors)for(var b in a.original_colors)"string"==typeof b&&"chart."===b.substr(0,6)&&(a.properties[b]=RG.arrayClone(a.original_colors[b]));"function"==typeof a.resetColorsToOriginalValues&&a.resetColorsToOriginalValues(),a.colorsParsed=!1},RG.linearGradient=RG.LinearGradient=function(a,b,c,d,e,f,g){for(var h=a.context.createLinearGradient(b,c,d,e),i=arguments.length-5,j=5;j<arguments.length;++j){var k=arguments[j],l=(j-5)/(i-1);h.addColorStop(l,k)}return h},RG.radialGradient=RG.RadialGradient=function(a,b,c,d,e,f,g,h,i){for(var j=a.context.createRadialGradient(b,c,d,e,f,g),k=arguments.length-7,l=7;l<arguments.length;++l){var m=arguments[l],n=(l-7)/(k-1);j.addColorStop(n,m)}return j},RG.addEventListener=RG.AddEventListener=function(a,b,c){var d=arguments[3]?arguments[3]:"unknown";RG.Registry.get("chart.event.handlers").push([a,b,c,d])},RG.clearEventListeners=RG.ClearEventListeners=function(a){if(a&&"window"==a)window.removeEventListener("mousedown",window.__rgraph_mousedown_event_listener_installed__,!1),window.removeEventListener("mouseup",window.__rgraph_mouseup_event_listener_installed__,!1);else{var b=document.getElementById(a);b.removeEventListener("mouseup",b.__rgraph_mouseup_event_listener_installed__,!1),b.removeEventListener("mousemove",b.__rgraph_mousemove_event_listener_installed__,!1),b.removeEventListener("mousedown",b.__rgraph_mousedown_event_listener_installed__,!1),b.removeEventListener("click",b.__rgraph_click_event_listener_installed__,!1)}},RG.hidePalette=RG.HidePalette=function(){var a=RG.Registry.get("palette");"object"==typeof a&&a&&(a.style.visibility="hidden",a.style.display="none",RG.Registry.set("palette",null))},RG.random=function(a,b){var c=arguments[2]?arguments[2]:0,d=ma.random();return Number(((b-a)*d+a).toFixed(c))},RG.arrayRand=RG.arrayRandom=RG.random.array=function(a,b,c){for(var d=0,e=[];d<a;d+=1)e.push(RG.random(b,c,arguments[3]));return e},RG.noShadow=RG.NoShadow=function(a){var b=a.context;b.shadowColor="rgba(0,0,0,0)",b.shadowBlur=0,b.shadowOffsetX=0,b.shadowOffsetY=0},RG.setShadow=RG.SetShadow=function(a,b,c,d,e){var f=a.context;f.shadowColor=b,f.shadowOffsetX=c,f.shadowOffsetY=d,f.shadowBlur=e},RG.Registry.set=RG.Registry.Set=function(a,b){return a=a.replace(/([A-Z])/g,function(a){return"."+String(RegExp.$1).toLowerCase()}),"chart."!==a.substr(0,6)&&(a="chart."+a),RG.Registry.store[a]=b,b},RG.Registry.get=RG.Registry.Get=function(a){return a=a.replace(/([A-Z])/g,function(a){return"."+String(RegExp.$1).toLowerCase()}),"chart."!==a.substr(0,6)&&(a="chart."+a),RG.Registry.store[a]},RG.degrees2Radians=function(a){return a*(RG.PI/180)},RG.log=function(a,b){return ma.log(a)/(b?ma.log(b):1)},RG.isArray=RG.is_array=function(a){if(!a||!a.constructor)return!1;var b=a.constructor.toString().indexOf("Array");return null!=a&&"number"==typeof b&&b>0&&b<20},RG.trim=function(a){return RG.ltrim(RG.rtrim(a))},RG.ltrim=function(a){return a.replace(/^(\s|\0)+/,"")},RG.rtrim=function(a){return a.replace(/(\s|\0)+$/,"")},RG.isNull=RG.is_null=function(a){return null==a||"object"==typeof a&&!a},RG.async=RG.Async=function(a){return setTimeout(a,arguments[1]?arguments[1]:1)},RG.reset=RG.Reset=function(a){a.width=a.width,RG.ObjectRegistry.clear(a),a.__rgraph_aa_translated__=!1,RG.text2.domNodeCache&&RG.text2.domNodeCache.reset&&RG.text2.domNodeCache.reset(a),RG.text2.domNodeCache||(RG.text2.domNodeCache=[]),RG.text2.domNodeDimensionCache||(RG.text2.domNodeDimensionCache=[]),RG.text2.domNodeCache[a.id]=[],RG.text2.domNodeDimensionCache[a.id]=[]},RG.att=function(a){},RG.getCanvasTag=function(a){a="object"==typeof a?a.id:a;var b=doc.getElementById(a);return[a,b]},RG.Effects.updateCanvas=RG.Effects.UpdateCanvas=function(a){win.requestAnimationFrame=win.requestAnimationFrame||win.webkitRequestAnimationFrame||win.msRequestAnimationFrame||win.mozRequestAnimationFrame||function(a){setTimeout(a,16.666)},win.requestAnimationFrame(a)},RG.Effects.getEasingMultiplier=function(a,b){return ma.pow(ma.sin(b/a*RG.HALFPI),3)},RG.stringsToNumbers=function(a){var b=arguments[1]||",";if("number"==typeof a)return a;if("string"==typeof a&&(a=a.indexOf(b)!=-1?a.split(b):parseFloat(a)),"object"==typeof a)for(var c=0,d=a.length;c<d;c+=1)a[c]=parseFloat(a[c]);return a},RG.cachedDraw=function(a,b,c){RG.cache[b]||(RG.cache[b]={},RG.cache[b].object=a,RG.cache[b].canvas=document.createElement("canvas"),RG.cache[b].canvas.setAttribute("width",a.canvas.width),RG.cache[b].canvas.setAttribute("height",a.canvas.height),RG.cache[b].canvas.setAttribute("id","background_cached_canvas"+a.canvas.id),RG.cache[b].canvas.__object__=a,RG.cache[b].context=RG.cache[b].canvas.getContext("2d"),RG.cache[b].context.translate(.5,.5),c(a,RG.cache[b].canvas,RG.cache[b].context)),a.context.drawImage(RG.cache[b].canvas,-.5,-.5)},RG.parseObjectStyleConfig=function(a,b){var c=function(a,b,d,e){for(key in b)if(key.match(/^exec[0-9]*$/))b[key](a,e);else{for(var g=!1,h=!1,i=b[key];key.match(/([A-Z])/);)key=key.replace(/([A-Z])/,"."+RegExp.$1.toLowerCase());!RG.isNull(i)&&i.constructor&&(g=i.constructor.toString().indexOf("Object")>0,h=i.constructor.toString().indexOf("Array")>0),g&&!h?c(a,b[key],d+"."+key,e):"self"===key?e[d]=i:e[d+"."+key]=i}return e},d=c(a,b,"chart",{});for(key in d)"string"==typeof key&&a.set(key,d[key])},RG.path2=function(a,b){function g(a){for(var b=[],d="",e=!1,g=2,h=0;h<a.length;h+=1){var i=a[h],j=i.match(/ /);j?e?d+=i:('"'!==d[0]&&"'"!==d[0]||(d=d.substr(1,d.length-2)),"%"===d.trim()&&"undefined"!=typeof c[g]&&(d=c[g++]),b.push(d),d=""):("'"!==i&&'"'!==i||(e=!e),d+=i)}return"%"===d.trim()&&c[g]&&(d=c[g++]),b.push(d),b}var c=arguments;"string"==typeof b&&(b=g(b)),RG.path2.last=RG.arrayClone(b);for(var d=0,e=b.length;d<e;d+=1)switch(b[d]){case"b":a.beginPath();break;case"c":a.closePath();break;case"m":a.moveTo(parseFloat(b[d+1]),parseFloat(b[d+2])),d+=2;break;case"l":a.lineTo(parseFloat(b[d+1]),parseFloat(b[d+2])),d+=2;break;case"s":b[d+1]&&(a.strokeStyle=b[d+1]),a.stroke(),d++;break;case"f":b[d+1]&&(a.fillStyle=b[d+1]),a.fill(),d++;break;case"qc":a.quadraticCurveTo(parseFloat(b[d+1]),parseFloat(b[d+2]),parseFloat(b[d+3]),parseFloat(b[d+4])),d+=4;break;case"bc":a.bezierCurveTo(parseFloat(b[d+1]),parseFloat(b[d+2]),parseFloat(b[d+3]),parseFloat(b[d+4]),parseFloat(b[d+5]),parseFloat(b[d+6])),d+=6;break;case"r":a.rect(parseFloat(b[d+1]),parseFloat(b[d+2]),parseFloat(b[d+3]),parseFloat(b[d+4])),d+=4;break;case"a":a.arc(parseFloat(b[d+1]),parseFloat(b[d+2]),parseFloat(b[d+3]),parseFloat(b[d+4]),parseFloat(b[d+5]),"true"===b[d+6]||b[d+6]===!0||1===b[d+6]||"1"===b[d+6]),d+=6;break;case"at":a.arcTo(parseFloat(b[d+1]),parseFloat(b[d+2]),parseFloat(b[d+3]),parseFloat(b[d+4]),parseFloat(b[d+5])),d+=5;break;case"lw":a.lineWidth=parseFloat(b[d+1]),d++;break;case"e":a.ellipse(parseFloat(b[d+1]),parseFloat(b[d+2]),parseFloat(b[d+3]),parseFloat(b[d+4]),parseFloat(b[d+5]),parseFloat(b[d+6]),parseFloat(b[d+7]),"true"===b[d+8]),d+=8;break;case"lj":a.lineJoin=b[d+1],d++;break;case"lc":a.lineCap=b[d+1],d++;break;case"sc":a.shadowColor=b[d+1],d++;break;case"sb":a.shadowBlur=parseFloat(b[d+1]),d++;break;case"sx":a.shadowOffsetX=parseFloat(b[d+1]),d++;break;case"sy":a.shadowOffsetY=parseFloat(b[d+1]),d++;break;case"fs":a.fillStyle=b[d+1],d++;break;case"ss":a.strokeStyle=b[d+1],d++;break;case"fr":a.fillRect(parseFloat(b[d+1]),parseFloat(b[d+2]),parseFloat(b[d+3]),parseFloat(b[d+4])),d+=4;break;case"sr":a.strokeRect(parseFloat(b[d+1]),parseFloat(b[d+2]),parseFloat(b[d+3]),parseFloat(b[d+4])),d+=4;break;case"cl":a.clip();break;case"sa":a.save();break;case"rs":a.restore();break;case"tr":a.translate(parseFloat(b[d+1]),parseFloat(b[d+2])),d+=2;break;case"sl":a.scale(parseFloat(b[d+1]),parseFloat(b[d+2])),d+=2;break;case"ro":a.rotate(parseFloat(b[d+1])),d++;break;case"tf":a.transform(parseFloat(b[d+1]),parseFloat(b[d+2]),parseFloat(b[d+3]),parseFloat(b[d+4]),parseFloat(b[d+5]),parseFloat(b[d+6])),d+=6;break;case"stf":a.setTransform(parseFloat(b[d+1]),parseFloat(b[d+2]),parseFloat(b[d+3]),parseFloat(b[d+4]),parseFloat(b[d+5]),parseFloat(b[d+6])),d+=6;break;case"cr":a.clearRect(parseFloat(b[d+1]),parseFloat(b[d+2]),parseFloat(b[d+3]),parseFloat(b[d+4])),d+=4;break;case"ld":var f=b[d+1];a.setLineDash(f),d+=1;break;case"ldo":a.lineDashOffset=b[d+1],d++;break;case"fo":a.font=b[d+1],d++;break;case"ft":a.fillText(b[d+1],parseFloat(b[d+2]),parseFloat(b[d+3])),d+=3;break;case"st":a.strokeText(b[d+1],parseFloat(b[d+2]),parseFloat(b[d+3])),d+=3;break;case"ta":a.textAlign=b[d+1],d++;break;case"tbl":a.textBaseline=b[d+1],d++;break;case"ga":a.globalAlpha=parseFloat(b[d+1]),d++;break;case"gco":a.globalCompositeOperation=b[d+1],d++;break;case"fu":b[d+1](a.canvas.__object__),d++;break;case"":break;default:alert("[ERROR] Unknown option: "+b[d])}},RG.wrap=function(){}}(window,document),window.$p=function(a){RGraph.pr(arguments[0],arguments[1],arguments[3])},window.$a=function(a){alert(a)},window.$cl=function(a){return console.log(a)},String.prototype.format||(String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c-1]?a[c-1]:b})}),RGraph=window.RGraph||{isRGraph:!0},function(a,b,c){var d=RGraph,f=(navigator.userAgent,Math);d.installWindowMousedownListener=d.InstallWindowMousedownListener=function(b){d.window_mousedown_event_listener||(d.window_mousedown_event_listener=function(b){navigator.userAgent.indexOf("Firefox")>=0&&(a.event=b),b=d.fixEventObject(b),d.HideTooltip&&d.Registry.Get("chart.tooltip")&&(d.clear(d.Registry.Get("chart.tooltip").__canvas__),d.redraw(),d.hideTooltip())},a.addEventListener("mousedown",d.window_mousedown_event_listener,!1))},d.installWindowMouseupListener=d.InstallWindowMouseupListener=function(b){d.window_mouseup_event_listener||(d.window_mouseup_event_listener=function(b){if(navigator.userAgent.indexOf("Firefox")>=0&&(a.event=b),b=d.fixEventObject(b),d.annotating_window_onmouseup)return void d.annotating_window_onmouseup(b);if(d.Registry.Get("chart.adjusting")||d.Registry.Get("chart.adjusting.gantt")){var c=d.Registry.Get("chart.adjusting");c&&"line"===c.type&&(c.data_arr=d.arrayLinearize(c.data)),d.fireCustomEvent(d.Registry.Get("chart.adjusting"),"onadjustend")}d.Registry.set("chart.adjusting",null),d.Registry.set("chart.adjusting.shape",null),d.Registry.set("chart.adjusting.gantt",null);for(var e=document.getElementsByTagName("canvas"),f=0;f<e.length;++f)if(e[f].__object__&&e[f].__object__.isRGraph&&!e[f].__object__.get("chart.annotatable"))if(e[f].__rgraph_trace_cover__||g)var g=!0;else d.clear(e[f]);g||d.redraw()},a.addEventListener("mouseup",d.window_mouseup_event_listener,!1))},d.installCanvasMouseupListener=d.InstallCanvasMouseupListener=function(a){a.canvas.rgraph_mouseup_event_listener||(a.canvas.rgraph_mouseup_event_listener=function(a){navigator.userAgent.indexOf("Firefox")>=0&&(window.event=a),a=d.fixEventObject(a);var b=d.ObjectRegistry.getObjectsByXY(a);if(b)for(var c=0,e=b.length;c<e;c+=1){var f=b[c],h=(b[c].id,f.Get("link"));if("drawing.text"==f.type&&"string"==typeof h){var i=f.get("link.target"),j=f.get("link.options");window.open(h,i?i:null,j)}if(!d.isNull(f)&&d.tooltip){var k=f.getShape(a);if(k&&k.tooltip){var l=k.tooltip;if(l){k.object.type;return d.clear(f.canvas),d.redraw(),d.Registry.set("chart.tooltip.shape",k),d.tooltip(f,l,0,0,k.index,a),f.highlight(k),d.Registry.get("chart.tooltip")&&(d.Registry.get("chart.tooltip").__shape__=k,d.evaluateCursor(a)),a.cancelBubble=!0,a.stopPropagation(),!1}}}if((d.Registry.get("chart.adjusting")||d.Registry.get("chart.adjusting.gantt"))&&(f&&"line"===f.type&&(f.data_arr=d.arrayLinearize(f.data)),d.fireCustomEvent(d.Registry.get("chart.adjusting"),"onadjustend")),d.Registry.set("chart.adjusting",null),d.Registry.set("chart.adjusting.shape",null),d.Registry.set("chart.adjusting.gantt",null),k||f.overChartArea&&f.overChartArea(a))break}},a.canvas.addEventListener("mouseup",a.canvas.rgraph_mouseup_event_listener,!1))},d.installCanvasMousemoveListener=d.InstallCanvasMousemoveListener=function(a){a.canvas.rgraph_mousemove_event_listener||(a.canvas.rgraph_mousemove_event_listener=function(a){navigator.userAgent.indexOf("Firefox")>=0&&(window.event=a),a=d.fixEventObject(a);var b=d.OR.getObjectsByXY(a),c=[];if(b&&b.length>0){for(var e=0,f=b.length;e<f;e+=1){var g=b[e];g.id;if(c[g.uid]=!0,g.getShape){var i=g.getShape(a);if((!i&&"number"==typeof g.__mouseover_shape_index__||i&&"number"==typeof g.__mouseover_shape_index__&&i.index!==g.__mouseover_shape_index__)&&d.fireCustomEvent(g,"onmouseout"),g.coords&&g.coords.key&&g.coords.key.length)for(var j=d.getMouseXY(a),e=0,k=!1;e<g.coords.key.length;++e)j[0]>=g.coords.key[e][0]&&j[0]<=g.coords.key[e][0]+g.coords.key[e][2]&&j[1]>=g.coords.key[e][1]&&j[1]<=g.coords.key[e][1]+g.coords.key[e][3]&&(d.Registry.set("key-element",g.coords.key[e]),k=!0),k||d.Registry.set("key-element",null);var l=g.get("chart.events.mousemove");if(!l&&"function"==typeof g.onmousemove)var l=g.onmousemove;if(i){var m="scatter"==i.object.type?i.index_adjusted:i.index;if("object"==typeof g["$"+m]&&"function"==typeof g["$"+m].onmousemove)var n=g["$"+m].onmousemove}if(!i||"function"!=typeof l&&"function"!=typeof n&&"string"!=typeof g.Get("link"))"string"==typeof g.Get("chart.events.mousemove.revertto")&&(d.cursor.push("default"),g.Set("chart.events.mousemove.revertto",null));else if(null==g.Get("chart.events.mousemove.revertto")&&g.Set("chart.events.mousemove.revertto",a.target.style.cursor),"function"==typeof l&&(RGraph.custom_events_mousemove_pointer=l(a,i)),"function"==typeof n&&(RGraph.custom_events_mousemove_pointer=RGraph.custom_events_mousemove_pointer||n(a,i)),"object"==typeof d.events&&"object"==typeof d.events[g.uid])for(e in d.events[g.uid])"string"==typeof e&&"object"==typeof d.events[g.uid][e]&&"onmousemove"===d.events[g.uid][e][1]&&"function"==typeof d.events[g.uid][e][2]&&d.events[g.uid][e][2](g);var l=g.properties["chart.events.mouseover"];if(l||"function"!=typeof g.onmouseover||(l=g.onmouseover),i){var m="scatter"==i.object.type?i.index_adjusted:i.index;if("object"==typeof g["$"+m]&&"function"==typeof g["$"+m].onmouseover)var n=g["$"+m].onmouseover}else g.__mouseover_shape_index__=null,d.__mouseover_objects__=[];if("undefined"==typeof d.__mouseover_objects__&&(d.__mouseover_objects__=[]),i){if(g.__mouseover_shape_index__===i.index==!1&&(g.__mouseover_shape_index__=i.index,d.__mouseover_objects__.push(g),l&&l(a,i),n&&n(a,i),"object"==typeof d.events&&"object"==typeof d.events[g.uid]))for(e in d.events[g.uid])"string"==typeof e&&"object"==typeof d.events[g.uid][e]&&"onmouseover"===d.events[g.uid][e][1]&&"function"==typeof d.events[g.uid][e][2]&&d.events[g.uid][e][2](g)}else g.__mouseover_shape_index__=null,d.__mouseover_objects__=[];var o=d.Registry.get("chart.tooltip"),p=g.get("chart.tooltips"),q=g.Get("chart.tooltips.event");if(i&&(p&&p[i.index]||i.tooltip)&&q.indexOf("mousemove")!==-1&&(d.isNull(o)||g.uid!=o.__object__.uid||o.__index__!=i.index||"number"==typeof i.dataset&&i.dataset!=o.__shape__.dataset))return d.clear(g.canvas),d.hideTooltip(),d.redraw(),void g.canvas.rgraph_mouseup_event_listener(a);if(g&&g.get("chart.adjustable")&&g.Adjusting_mousemove(a),i||g.overChartArea&&g.overChartArea(a))break}}for(var b=d.OR.getObjectsByCanvasID(a.target.id),e=0;e<b.length;++e)c[b[e].uid]||(b[e].__mouseover_shape_index__=null)}else{for(var b=d.OR.getObjectsByCanvasID(a.target.id),e=0;e<b.length;e++)"number"==typeof b[e].__mouseover_shape_index__&&d.fireCustomEvent(b[e],"onmouseout"),b[e].__mouseover_shape_index__=null;d.__mouseover_objects__=[]}a.target&&a.target.__object__&&a.target.__object__.get("chart.crosshairs")&&d.drawCrosshairs(a,a.target.__object__),a.target.__object__&&a.target.__object__.get("chart.annotatable")&&d.annotating_canvas_onmousemove&&d.annotating_canvas_onmousemove(a),d.evaluateCursor(a)},a.canvas.addEventListener("mousemove",a.canvas.rgraph_mousemove_event_listener,!1))},d.installCanvasMousedownListener=d.InstallCanvasMousedownListener=function(a){a.canvas.rgraph_mousedown_event_listener||(a.canvas.rgraph_mousedown_event_listener=function(a){if(navigator.userAgent.indexOf("Firefox")>=0&&(window.event=a),a=d.fixEventObject(a),a.target.__object__&&a.target.__object__.get("chart.annotatable")&&d.annotating_canvas_onmousedown)return void d.annotating_canvas_onmousedown(a);var b=d.ObjectRegistry.getObjectByXY(a);if(b){b.id;if(b&&b.isRGraph&&b.get("chart.adjustable")){var b=d.OR.getObjectByXY(a);if(b&&b.isRGraph){switch(b.type){case"bar":var e=b.getShapeByX(a);break;case"gantt":var e=b.getShape(a),f="number"==typeof e.subindex?b.data[e.index][e.subindex]:b.data[e.index];if(e){var g=d.getMouseXY(a);d.Registry.set("chart.adjusting.gantt",{index:e.index,subindex:e.subindex,object:b,mousex:g[0],mousey:g[1],event:f,event_start:f[0],event_duration:f[1],mode:g[0]>e.x+e.width-5?"resize":"move",shape:e})}break;case"line":var e=b.getShape(a);break;case"hbar":var e=b.getShapeByY(a);break;default:var e=null}(d.isNull(b.properties["chart.adjustable.only"])||"undefined"==typeof b.properties["chart.adjustable.only"]||d.isArray(b.properties["chart.adjustable.only"])&&b.isAdjustable&&b.isAdjustable(e))&&(d.Registry.set("chart.adjusting.shape",e),d.fireCustomEvent(b,"onadjustbegin"),d.Registry.set("chart.adjusting",b),d.clear(b.canvas),d.redraw(),b.canvas.rgraph_mousemove_event_listener(a))}}d.clear(b.canvas),d.redraw()}},a.canvas.addEventListener("mousedown",a.canvas.rgraph_mousedown_event_listener,!1))},d.installCanvasClickListener=d.InstallCanvasClickListener=function(a){a.canvas.rgraph_click_event_listener||(a.canvas.rgraph_click_event_listener=function(a){navigator.userAgent.indexOf("Firefox")>=0&&(window.event=a),a=d.fixEventObject(a);for(var b=d.ObjectRegistry.getObjectsByXY(a),c=0,e=b.length;c<e;c+=1){var f=b[c],h=(f.id,f.getShape(a)),i=f.get("chart.events.click");if(i||"function"!=typeof f.onclick||(i=f.onclick),h&&"function"==typeof i){if(i(a,h),"object"==typeof d.events&&"object"==typeof d.events[f.uid])for(c in d.events[f.uid])"string"==typeof c&&"object"==typeof d.events[f.uid][c]&&"onclick"===d.events[f.uid][c][1]&&"function"==typeof d.events[f.uid][c][2]&&d.events[f.uid][c][2](f);return}var j=d.Registry.get("key-element");if(j&&d.fireCustomEvent(f,"onkeyclick"),h){var k="scatter"==h.object.type?h.index_adjusted:h.index;if("number"==typeof k&&f["$"+k]){var i=f["$"+k].onclick;if("function"==typeof i)return void i(a,h)}}if(h||f.overChartArea&&f.overChartArea(a))break}},a.canvas.addEventListener("click",a.canvas.rgraph_click_event_listener,!1))},d.evaluateCursor=d.EvaluateCursor=function(a){for(var b=null,c=d.getMouseXY(a),e=c[0],f=c[1],g=a.target,h=d.OR.getObjectsByCanvasID(g.id),i=0,j=h.length;i<j;i+=1)if(h[i].getShape&&h[i].getShape(a)||h[i].overChartArea&&h[i].overChartArea(a)){var b=h[i];b.id}if(!d.isNull(b)){if(b.getShape&&b.getShape(a)){var l=b.getShape(a);if(b.get("chart.tooltips")){var m=d.parseTooltipText(b.get("chart.tooltips"),l.index);if(!m&&"scatter"==l.object.type&&l.index_adjusted&&(m=d.parseTooltipText(b.get("chart.tooltips"),l.index_adjusted)),
        m)var n=!0}}if(!d.isNull(b)&&b.Get("chart.key.interactive"))for(var o=0;o<b.coords.key.length;++o)if(e>b.coords.key[o][0]&&e<b.coords.key[o][0]+b.coords.key[o][2]&&f>b.coords.key[o][1]&&f<b.coords.key[o][1]+b.coords.key[o][3])var n=!0}if(RGraph.custom_events_mousemove_pointer){var n=!0;RGraph.custom_events_mousemove_pointer=!1}for(var h=d.OR.objects.byCanvasID,i=0,j=h.length;i<j;i+=1)if(h[i]&&h[i][1].Get("chart.resizable"))var p=!0;if(p&&e>a.target.width-32&&f>a.target.height-16&&(n=!0),n?a.target.style.cursor="pointer":"pointer"==a.target.style.cursor?a.target.style.cursor="default":a.target.style.cursor=null,p&&e>=a.target.width-15&&f>=a.target.height-15?a.target.style.cursor="move":"move"===a.target.style.cursor&&(a.target.style.cursor="default"),"boolean"==typeof mouse_over_key&&mouse_over_key&&(a.target.style.cursor="pointer"),b&&"line"==b.type&&b.get("chart.adjustable"))if(b.getShape){var l=b.getShape(a);l&&b.isAdjustable(l)&&(a.target.style.cursor="ns-resize")}else a.target.style.cursor="default";a.target.__object__&&a.target.__object__.get("chart.annotatable")&&(a.target.style.cursor="crosshair"),b&&"drawing.text"===b.type&&l&&"string"==typeof b.get("link")&&(a.target.style.cursor="pointer")},d.parseTooltipText=function(a,b){if(!a)return null;if("function"==typeof a)var c=a(b);else if("string"==typeof a)var c=a;else if("object"==typeof a&&"function"==typeof a[b])var c=a[b](b);else if("string"==typeof a[b]&&a[b])var c=a[b];else var c="";return"undefined"==c?c="":"null"==c&&(c=""),d.getTooltipTextFromDIV?d.getTooltipTextFromDIV(c):c},d.drawCrosshairs=d.DrawCrosshairs=function(a,b){var a=d.fixEventObject(a),c=b.canvas.width,e=b.canvas.height,g=d.getMouseXY(a),h=g[0],i=g[1],j=b.gutterLeft,k=b.gutterRight,l=b.gutterTop,m=b.gutterBottom,n=Math.round,o=b.properties,p=b.context,q=b.canvas;if(d.redrawCanvas(q),h>=j&&i>=l&&h<=c-k&&i<=e-m){var r=o["chart.crosshairs.linewidth"]?o["chart.crosshairs.linewidth"]:1;if(p.lineWidth=r?r:1,p.beginPath(),p.strokeStyle=o["chart.crosshairs.color"],o["chart.crosshairs.snap"]){var s=null,t=null,u=null;if("line"==b.type){for(var v=0;v<b.coords.length;++v){var w=d.getHypLength(b.coords[v][0],b.coords[v][1],h,i);if("number"!=typeof t||w<t)var s=v,t=w}h=b.coords[s][0],i=b.coords[s][1];for(var x=0;x<b.coords2.length;++x)for(var s=0;s<b.coords2[x].length;++s)b.coords2[x][s][0]==h&&b.coords2[x][s][1]==i&&(q.__crosshairs_snap_dataset__=x,q.__crosshairs_snap_point__=s)}else{for(var v=0;v<b.coords.length;++v)for(var y=0;y<b.coords[v].length;++y){var u=d.getHypLength(b.coords[v][y][0],b.coords[v][y][1],h,i);if("number"!=typeof t||u<t)var x=v,s=y,t=u}q.__crosshairs_snap_dataset__=x,q.__crosshairs_snap_point__=s,h=b.coords[x][s][0],i=b.coords[x][s][1]}}if(o["chart.crosshairs.vline"]&&(p.moveTo(n(h),n(l)),p.lineTo(n(h),n(e-m))),o["chart.crosshairs.hline"]&&(p.moveTo(n(j),n(i)),p.lineTo(n(c-k),n(i))),p.stroke(),"scatter"==b.type&&o["chart.crosshairs.coords"]){var z=(h-j)/(c-j-k)*(o["chart.xmax"]-o["chart.xmin"])+o["chart.xmin"];z=z.toFixed(o["chart.scale.decimals"]);var A=b.max-(i-o["chart.gutter.top"])/(e-l-m)*b.max;"scatter"==b.type&&"center"==b.properties["chart.xaxispos"]&&(A=2*(A-b.max/2)),A=A.toFixed(o["chart.scale.decimals"]);var B=d.Registry.get("chart.coordinates.coords.div"),g=d.getMouseXY(a),C=d.getCanvasXY(q);if(!B){var B=document.createElement("DIV");B.__object__=b,B.style.position="absolute",B.style.backgroundColor="white",B.style.border="1px solid black",B.style.fontFamily="Arial, Verdana, sans-serif",B.style.fontSize="10pt",B.style.padding="2px",B.style.opacity=1,B.style.WebkitBorderRadius="3px",B.style.borderRadius="3px",B.style.MozBorderRadius="3px",document.body.appendChild(B),d.Registry.set("chart.coordinates.coords.div",B)}B.style.opacity=1,B.style.display="inline",o["chart.crosshairs.coords.fixed"]?(B.style.left=C[0]+j+3+"px",B.style.top=C[1]+l+3+"px"):(B.style.left=f.max(2,a.pageX-B.offsetWidth-3)+"px",B.style.top=f.max(2,a.pageY-B.offsetHeight-3)+"px"),B.innerHTML='<span style="color: #666">'+o["chart.crosshairs.coords.labels.x"]+":</span> "+z+'<br><span style="color: #666">'+o["chart.crosshairs.coords.labels.y"]+":</span> "+A,b.canvas.addEventListener("mouseout",d.hideCrosshairCoords,!1),q.__crosshairs_labels__=B,q.__crosshairs_x__=z,q.__crosshairs_y__=A}else o["chart.crosshairs.coords"]&&alert("[RGRAPH] Showing crosshair coordinates is only supported on the Scatter chart");d.fireCustomEvent(b,"oncrosshairs")}else d.hideCrosshairCoords()},d.allowSegmentHighlight=function(a){var b=a.object,c=a.count,e=a.fill,g=a.stroke;d.segmentHighlightFunction||(d.segmentHighlightFunction=function(a){var h=d.getMouseXY(a),j=d.getAngleByXY(b.centerx,b.centery,h[0],h[1]);j+=d.HALFPI,j>d.TWOPI&&(j-=d.TWOPI),d.redraw();var k=0,l=0,m=2*f.PI/c,n=b.radius;!function(){for(i=0;i<c;i+=1)if(j<m*(i+1))return k=i*m,void(l=(i+1)*m)}(),k-=d.HALFPI,l-=d.HALFPI,d.path2(b.context,"b m % % a % % % % % false c s % f %",b.centerx,b.centery,b.centerx,b.centery,n,k,l,g,e)},b.canvas.addEventListener("mousemove",d.segmentHighlightFunction,!1))}}(window,document),RGraph=window.RGraph||{isRGraph:!0},RGraph.Bar=function(a){if("object"==typeof a&&"object"==typeof a.data&&"string"==typeof a.id)var b=a.id,c=document.getElementById(b),d=a.data,e=!0;else var b=a,c=document.getElementById(b),d=arguments[1];if(this.id=b,this.canvas=c,this.context=this.canvas.getContext("2d"),this.canvas.__object__=this,this.type="bar",this.max=0,this.stackedOrGrouped=!1,this.isRGraph=!0,this.uid=RGraph.CreateUID(),this.canvas.uid=this.canvas.uid?this.canvas.uid:RGraph.CreateUID(),this.colorsParsed=!1,this.original_colors=[],this.cachedBackgroundCanvas=null,this.firstDraw=!0,this.properties={"chart.background.barcolor1":"rgba(0,0,0,0)","chart.background.barcolor2":"rgba(0,0,0,0)","chart.background.grid":!0,"chart.background.grid.color":"#ddd","chart.background.grid.width":1,"chart.background.grid.hsize":20,"chart.background.grid.vsize":20,"chart.background.grid.vlines":!0,"chart.background.grid.hlines":!0,"chart.background.grid.border":!0,"chart.background.grid.autofit":!0,"chart.background.grid.autofit.align":!0,"chart.background.grid.autofit.numhlines":5,"chart.background.grid.autofit.numvlines":20,"chart.background.grid.dashed":!1,"chart.background.grid.dotted":!1,"chart.background.image.stretch":!0,"chart.background.image.x":null,"chart.background.image.y":null,"chart.background.image.w":null,"chart.background.image.h":null,"chart.background.image.align":null,"chart.background.color":null,"chart.background.hbars":null,"chart.numyticks":10,"chart.hmargin":5,"chart.hmargin.grouped":1,"chart.strokecolor":"rgba(0,0,0,0)","chart.axis.color":"black","chart.axis.linewidth":1,"chart.gutter.top":25,"chart.gutter.bottom":30,"chart.gutter.left":25,"chart.gutter.right":25,"chart.labels":null,"chart.labels.bold":!1,"chart.labels.color":null,"chart.labels.ingraph":null,"chart.labels.above":!1,"chart.labels.above.decimals":0,"chart.labels.above.size":null,"chart.labels.above.color":null,"chart.labels.above.background":"rgba(0,0,0,0)","chart.labels.above.angle":null,"chart.labels.above.offset":4,"chart.labels.above.units.pre":"","chart.labels.above.units.post":"","chart.ylabels":!0,"chart.ylabels.count":5,"chart.ylabels.inside":!1,"chart.ylabels.offsetx":0,"chart.ylabels.offsety":0,"chart.labels.offsetx":0,"chart.labels.offsety":0,"chart.xaxispos":"bottom","chart.yaxispos":"left","chart.text.angle":0,"chart.text.color":"black","chart.text.size":12,"chart.text.font":"Segoe UI, Arial, Verdana, sans-serif","chart.text.accessible":!0,"chart.text.accessible.overflow":"visible","chart.text.accessible.pointerevents":!0,"chart.ymin":0,"chart.ymax":null,"chart.title":"","chart.title.font":null,"chart.title.background":null,"chart.title.hpos":null,"chart.title.vpos":null,"chart.title.bold":!0,"chart.title.xaxis":"","chart.title.xaxis.bold":!0,"chart.title.xaxis.size":null,"chart.title.xaxis.font":null,"chart.title.xaxis.color":null,"chart.title.yaxis":"","chart.title.yaxis.bold":!0,"chart.title.yaxis.size":null,"chart.title.yaxis.font":null,"chart.title.yaxis.color":null,"chart.title.xaxis.pos":null,"chart.title.yaxis.pos":null,"chart.title.yaxis.x":null,"chart.title.yaxis.y":null,"chart.title.xaxis.x":null,"chart.title.xaxis.y":null,"chart.title.x":null,"chart.title.y":null,"chart.title.halign":null,"chart.title.valign":null,"chart.colors":["red","#0f0","blue","pink","orange","cyan","black","white","green","magenta"],"chart.colors.sequential":!1,"chart.colors.reverse":!1,"chart.grouping":"grouped","chart.variant":"bar","chart.variant.sketch.verticals":!0,"chart.variant.threed.xaxis":!0,"chart.variant.threed.yaxis":!0,"chart.variant.threed.angle":.1,"chart.variant.threed.offsetx":10,"chart.variant.threed.offsety":5,"chart.shadow":!1,"chart.shadow.color":"#aaa","chart.shadow.offsetx":0,"chart.shadow.offsety":0,"chart.shadow.blur":15,"chart.tooltips":null,"chart.tooltips.effect":"fade","chart.tooltips.css.class":"RGraph_tooltip","chart.tooltips.event":"onclick","chart.tooltips.highlight":!0,"chart.tooltips.hotspot.xonly":!1,"chart.highlight.stroke":"rgba(0,0,0,0)","chart.highlight.fill":"rgba(255,255,255,0.7)","chart.key":null,"chart.key.background":"white","chart.key.position":"graph","chart.key.shadow":!1,"chart.key.shadow.color":"#666","chart.key.shadow.blur":3,"chart.key.shadow.offsetx":2,"chart.key.shadow.offsety":2,"chart.key.position.gutter.boxed":!1,"chart.key.position.x":null,"chart.key.position.y":null,"chart.key.interactive":!1,"chart.key.interactive.highlight.chart.stroke":"black","chart.key.interactive.highlight.chart.fill":"rgba(255,255,255,0.7)","chart.key.interactive.highlight.label":"rgba(255,0,0,0.2)","chart.key.halign":"right","chart.key.color.shape":"square","chart.key.rounded":!0,"chart.key.text.size":10,"chart.key.linewidth":1,"chart.key.colors":null,"chart.key.text.color":"black","chart.contextmenu":null,"chart.units.pre":"","chart.units.post":"","chart.scale.decimals":0,"chart.scale.point":".","chart.scale.thousand":",","chart.scale.round":!1,"chart.scale.zerostart":!0,"chart.crosshairs":!1,"chart.crosshairs.color":"#333","chart.crosshairs.hline":!0,"chart.crosshairs.vline":!0,"chart.linewidth":1,"chart.annotatable":!1,"chart.annotate.color":"black","chart.zoom.factor":1.5,"chart.zoom.fade.in":!0,"chart.zoom.fade.out":!0,"chart.zoom.hdir":"right","chart.zoom.vdir":"down","chart.zoom.frames":25,"chart.zoom.delay":16.666,"chart.zoom.shadow":!0,"chart.zoom.background":!0,"chart.resizable":!1,"chart.resize.handle.background":null,"chart.adjustable":!1,"chart.adjustable.only":null,"chart.noaxes":!1,"chart.noxaxis":!1,"chart.noyaxis":!1,"chart.events.click":null,"chart.events.mousemove":null,"chart.numxticks":null,"chart.bevel":!1,"chart.errorbars":!1,"chart.errorbars.color":"black","chart.errorbars.capped":!0,"chart.errorbars.capped.width":14,"chart.errorbars.linewidth":1,"chart.combinedchart.effect":null,"chart.combinedchart.effect.options":null,"chart.combinedchart.effect.callback":null,"chart.clearto":"rgba(0,0,0,0)"},!this.canvas)return void alert("[BAR] No canvas support");for(var f=0;f<d.length;++f)if("string"==typeof d[f])d[f]=parseFloat(d[f]);else if("object"==typeof d[f]&&d[f])for(var g=0;g<d[f].length;++g)"string"==typeof d[f][g]&&(d[f][g]=parseFloat(d[f][g]));else"undefined"==typeof d[f]&&(d[f]=null);for(var f=0;f<d.length;++f)"object"!=typeof d[f]||RGraph.is_null(d[f])||(this.stackedOrGrouped=!0);for(var h=RGraph.arrayLinearize(d),f=0;f<h.length;++f)this["$"+f]={};this.data=d,this.original_data=RGraph.arrayClone(d),this.coords=[],this.coords2=[],this.coordsText=[],this.data_arr=RGraph.arrayLinearize(this.data),this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0);var i=RGraph,j=this.canvas,l=j.getContext("2d"),m=this.properties,n=i.path2,q=(window,document,Math);i.Effects&&"function"==typeof i.Effects.decorate&&i.Effects.decorate(this),this.set=this.Set=function(a){var b="undefined"==typeof arguments[1]?null:arguments[1];if(1===arguments.length&&"object"==typeof arguments[0])return i.parseObjectStyleConfig(this,arguments[0]),this;for("chart."!=a.substr(0,6)&&(a="chart."+a);a.match(/([A-Z])/);)a=a.replace(/([A-Z])/,"."+RegExp.$1.toLowerCase());if("chart.xlabels.offset"===a&&(a="chart.labels.offsety"),"chart.labels.abovebar"==a&&(a="chart.labels.above"),"chart.strokestyle"==a&&(a="chart.strokecolor"),"chart.xaxispos"==a&&("bottom"!=b&&"center"!=b&&"top"!=b&&(alert("[BAR] ("+this.id+") chart.xaxispos should be top, center or bottom. Tried to set it to: "+b+" Changing it to center"),b="center"),"top"==b))for(var c=0;c<this.data.length;++c)"number"==typeof this.data[c]&&this.data[c]>0&&alert("[BAR] The data element with index "+c+" should be negative");return"chart.linewidth"==a.toLowerCase()&&0==b&&(b=1e-4),m[a]=b,this},this.get=this.Get=function(a){for("chart."!=a.substr(0,6)&&(a="chart."+a);a.match(/([A-Z])/);)a=a.replace(/([A-Z])/,"."+RegExp.$1.toLowerCase());return m[a]},this.draw=this.Draw=function(){return"string"==typeof m["chart.background.image"]&&i.DrawBackgroundImage(this),i.FireCustomEvent(this,"onbeforedraw"),"3d"===m["chart.variant"]&&(m["chart.text.accessible"]||l.setTransform(1,m["chart.variant.threed.angle"],0,1,.5,.5)),this.colorsParsed||(this.parseColors(),this.colorsParsed=!0),this.gutterLeft=m["chart.gutter.left"],this.gutterRight=m["chart.gutter.right"],this.gutterTop=m["chart.gutter.top"],this.gutterBottom=m["chart.gutter.bottom"],("pyramid"==m["chart.variant"]||"dot"==m["chart.variant"])&&"object"==typeof m["chart.tooltips"]&&m["chart.tooltips"]&&m["chart.tooltips"].length>0&&alert("[BAR] ("+this.id+") Sorry, tooltips are not supported with dot or pyramid charts"),this.coords=[],this.coords2=[],this.coordsText=[],this.max=0,this.grapharea=j.height-this.gutterTop-this.gutterBottom,this.halfgrapharea=this.grapharea/2,this.halfTextHeight=m["chart.text.size"]/2,i.background.Draw(this),this.drawbars(),this.drawAxes(),this.DrawLabels(),(m["chart.bevel"]||m["chart.bevelled"])&&this.DrawBevel(),m["chart.key"]&&m["chart.key"].length&&i.DrawKey(this,m["chart.key"],m["chart.colors"]),m["chart.contextmenu"]&&i.ShowContext(this),m["chart.errorbars"]&&this.drawErrorbars(),m["chart.labels.ingraph"]&&i.DrawInGraphLabels(this),m["chart.resizable"]&&i.AllowResizing(this),i.InstallEventListeners(this),this.firstDraw&&(i.fireCustomEvent(this,"onfirstdraw"),this.firstDraw=!1,this.firstDrawFunc()),i.fireCustomEvent(this,"ondraw"),this},this.exec=function(a){return a(this),this},this.drawAxes=this.DrawAxes=function(){if(!m["chart.noaxes"]){var a=m["chart.xaxispos"],b=m["chart.yaxispos"],c="sketch"==m["chart.variant"];l.beginPath(),l.strokeStyle=m["chart.axis.color"],l.lineWidth=m["chart.axis.linewidth"]+.001,i.ISSAFARI==-1&&(l.lineCap="square"),0==m["chart.noyaxis"]&&("right"==b?(l.moveTo(j.width-this.gutterRight+(c?3:0),this.gutterTop-(c?3:0)),l.lineTo(j.width-this.gutterRight-(c?2:0),j.height-this.gutterBottom+(c?5:0))):(l.moveTo(this.gutterLeft-(c?2:0),this.gutterTop-(c?5:0)),l.lineTo(this.gutterLeft-(c?1:0),j.height-this.gutterBottom+(c?5:0)))),0==m["chart.noxaxis"]&&("center"==a?(l.moveTo(this.gutterLeft-(c?5:0),Math.round((j.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop+(c?2:0))),l.lineTo(j.width-this.gutterRight+(c?5:0),Math.round((j.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop-(c?2:0)))):"top"==a?(l.moveTo(this.gutterLeft-(c?3:0),this.gutterTop-(c?3:0)),l.lineTo(j.width-this.gutterRight+(c?5:0),this.gutterTop+(c?2:0))):(l.moveTo(this.gutterLeft-(c?5:0),q.round(this.getYCoord(0)-(c?2:0))),l.lineTo(j.width-this.gutterRight+(c?8:0),q.round(this.getYCoord(0)+(c?2:0)))));var d=m["chart.numyticks"];if(0==m["chart.noyaxis"]&&!c){var e=(j.height-this.gutterTop-this.gutterBottom)/d,f="left"==b?this.gutterLeft:j.width-this.gutterRight;if(this.properties["chart.numyticks"]>0){for(y=this.gutterTop;"center"==a?y<=j.height-this.gutterBottom:y<j.height-this.gutterBottom+("top"==a?1:0);y+=e)"center"==a&&y==this.gutterTop+this.grapharea/2||"top"==a&&y==this.gutterTop||(l.moveTo(f+0,q.round(y)),l.lineTo(f+("left"==b?-3:3),q.round(y)));"bottom"===a&&0!==m["chart.ymin"]&&(l.moveTo(f+0,q.round(j.height-m["chart.gutter.bottom"])),l.lineTo(f+("left"==b?-3:3),q.round(j.height-m["chart.gutter.bottom"])))}m["chart.noxaxis"]&&("center"==a?(l.moveTo(f+("left"==b?-3:3),Math.round(j.height/2)),l.lineTo(f,Math.round(j.height/2))):"top"==a?(l.moveTo(f+("left"==b?-3:3),Math.round(this.gutterTop)),l.lineTo(f,Math.round(this.gutterTop))):(l.moveTo(f+("left"==b?-3:3),Math.round(j.height-this.gutterBottom)),l.lineTo(f,Math.round(j.height-this.gutterBottom))))}if(0==m["chart.noxaxis"]&&!c){if("number"==typeof m["chart.numxticks"])var g=(j.width-this.gutterLeft-this.gutterRight)/m["chart.numxticks"];else var g=(j.width-this.gutterLeft-this.gutterRight)/this.data.length;"bottom"==a?(yStart=m["chart.ymin"]<0?this.getYCoord(0)-3:this.getYCoord(0),yEnd=this.getYCoord(0)+3):"top"==a?(yStart=this.gutterTop-3,yEnd=this.gutterTop):"center"==a&&(yStart=(j.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop+3,yEnd=(j.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop-3);var h=m["chart.noendxtick"];for(x=this.gutterLeft+("left"==b?g:0),len=j.width-this.gutterRight+("left"==b?5:0);x<len;x+=g)"left"==b&&!h&&x>this.gutterLeft?(l.moveTo(q.round(x),yStart),l.lineTo(q.round(x),yEnd)):"left"==b&&h&&x>this.gutterLeft&&x<j.width-this.gutterRight?(l.moveTo(q.round(x),yStart),l.lineTo(q.round(x),yEnd)):"right"==b&&x<j.width-this.gutterRight&&!h?(l.moveTo(q.round(x),yStart),l.lineTo(q.round(x),yEnd)):"right"==b&&x<j.width-this.gutterRight&&x>this.gutterLeft&&h&&(l.moveTo(q.round(x),yStart),l.lineTo(q.round(x),yEnd));(m["chart.noyaxis"]||null==m["chart.numxticks"])&&"number"==typeof m["chart.numxticks"]&&m["chart.numxticks"]>0&&(l.moveTo(Math.round(this.gutterLeft),yStart),l.lineTo(Math.round(this.gutterLeft),yEnd))}m["chart.noyaxis"]&&0==m["chart.noxaxis"]&&null==m["chart.numxticks"]&&("center"==a?(l.moveTo(q.round(this.gutterLeft),j.height/2-3),l.lineTo(q.round(this.gutterLeft),j.height/2+3)):(l.moveTo(q.round(this.gutterLeft),j.height-this.gutterBottom),l.lineTo(q.round(this.gutterLeft),j.height-this.gutterBottom+3))),l.stroke()}},this.drawbars=this.Drawbars=function(){l.lineWidth=m["chart.linewidth"],l.strokeStyle=m["chart.strokecolor"],l.fillStyle=m["chart.colors"][0];m["chart.scale.decimals"];if(m["chart.ymax"])this.scale2=i.getScale2(this,{max:m["chart.ymax"],strict:!m["chart.scale.round"],min:m["chart.ymin"],"scale.thousand":m["chart.scale.thousand"],"scale.point":m["chart.scale.point"],"scale.decimals":m["chart.scale.decimals"],"ylabels.count":m["chart.ylabels.count"],"scale.round":m["chart.scale.round"],"units.pre":m["chart.units.pre"],"units.post":m["chart.units.post"]});else{var d=m["chart.errorbars"];if("number"==typeof d){var e=d;m["chart.errorbars"]=[];for(var f=0;f<this.data.length;++f)if("number"==typeof this.data[f])m["chart.errorbars"].push([e,null]);else if("object"==typeof this.data[f]&&!i.isNull(this.data[f]))for(var g=0;g<this.data[f].length;++g)m["chart.errorbars"].push([e,null]);d=m["chart.errorbars"]}for(f=0;f<this.data.length;++f){if("object"==typeof this.data[f])var e="grouped"===m["chart.grouping"]?Number(i.arrayMax(this.data[f],!0)):Number(i.array_sum(this.data[f]));else var e=Number(this.data[f]);this.max=q.max(q.abs(this.max),q.abs(e)+Number("object"!=typeof m["chart.errorbars"]||"object"!=typeof m["chart.errorbars"][f]||i.isNull(m["chart.errorbars"][f])||"number"!=typeof m["chart.errorbars"][f][0]?0:m["chart.errorbars"][f][0]))}this.scale2=RGraph.getScale2(this,{max:this.max,min:m["chart.ymin"],"scale.thousand":m["chart.scale.thousand"],"scale.point":m["chart.scale.point"],"scale.decimals":m["chart.scale.decimals"],"ylabels.count":m["chart.ylabels.count"],"scale.round":m["chart.scale.round"],"units.pre":m["chart.units.pre"],"units.post":m["chart.units.post"]}),this.max=this.scale2.max}m["chart.adjustable"]&&!m["chart.ymax"]&&this.Set("chart.ymax",this.scale2.max),m["chart.background.hbars"]&&m["chart.background.hbars"].length>0&&RGraph.DrawBars(this);var h=m["chart.variant"];"3d"===h&&i.draw3DAxes(this);var A,n=m["chart.xaxispos"],o=(j.width-this.gutterLeft-this.gutterRight)/this.data.length,r=m["chart.hmargin"],s=m["chart.shadow"],t=m["chart.shadow.color"],u=m["chart.shadow.blur"],v=m["chart.shadow.offsetx"],w=m["chart.shadow.offsety"],x=m["chart.strokecolor"],y=m["chart.colors"],z=0;for(f=0,len=this.data.length;f<len;f+=1){if(i.arraySum(this.data[f])<0)var A=(i.arraySum(this.data[f])+this.scale2.min)/(this.scale2.max-this.scale2.min);else var A=(i.arraySum(this.data[f])-this.scale2.min)/(this.scale2.max-this.scale2.min);A*=q.abs(this.getYCoord(this.scale2.max)-this.getYCoord(this.scale2.min));var B=f*o+this.gutterLeft,C="center"==n?(j.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop-A:j.height-A-this.gutterBottom;if("top"==n&&(C=this.gutterTop+q.abs(A)),A<0&&(C+=A,A=q.abs(A)),s&&(l.shadowColor=t,l.shadowBlur=u,l.shadowOffsetX=v,l.shadowOffsetY=w),l.beginPath(),"number"==typeof this.data[f]){"bottom"===n&&m["chart.ymin"]<0&&(this.data[f]>=0?A=q.abs(this.getYCoord(0)-this.getYCoord(this.data[f])):(C=this.getYCoord(0),A=q.abs(this.getYCoord(0)-this.getYCoord(this.data[f]))));var D=o-2*r;if(D<0&&alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient."),l.strokeStyle=x,l.fillStyle=y[0],m["chart.colors.sequential"]&&(l.fillStyle=y[f]),"sketch"==h){l.lineCap="round";if(l.beginPath(),l.strokeStyle=y[0],m["chart.colors.sequential"]&&(l.strokeStyle=y[f]),l.moveTo(B+r+2,C+A-2),l.lineTo(B+r-1,C-4),l.moveTo(B+r-3,C+-2+(this.data[f]<0?A:0)),l.bezierCurveTo(B+.33*(r+o),C+15+(this.data[f]<0?A-10:0),B+.66*(r+o),C+5+(this.data[f]<0?A-10:0),B+r+o+-1,C+0+(this.data[f]<0?A:0)),l.moveTo(B+r+o-5,C-5),l.lineTo(B+r+o-3,C+A-3),m["chart.variant.sketch.verticals"])for(var F=.2;F<=.8;F+=.2)l.moveTo(B+r+o+(F>.4?-1:3)-F*o,C-1),l.lineTo(B+r+o-(F>.4?1:-1)-F*o,C+A+(.2==F?1:-2));l.stroke()}else if("bar"==h||"3d"==h||"glass"==h||"bevel"==h){if(RGraph.ISOLD&&s&&this.DrawIEShadow([B+r,C,D,A]),"glass"==h?(RGraph.filledCurvyRect(l,B+r,C,D,A,3,this.data[f]>0,this.data[f]>0,this.data[f]<0,this.data[f]<0),RGraph.strokedCurvyRect(l,B+r,C,D,A,3,this.data[f]>0,this.data[f]>0,this.data[f]<0,this.data[f]<0)):(l.beginPath(),l.rect(B+r,C,D,A),l.fill(),i.NoShadow(this),l.beginPath(),l.rect(B+r,C,D,A),l.stroke()),"3d"==h){var G=l.strokeStyle,H=l.fillStyle;this.data[f]>=0&&(l.beginPath(),l.moveTo(B+r,C),l.lineTo(B+r+m["chart.variant.threed.offsetx"],C-m["chart.variant.threed.offsety"]),l.lineTo(B+r+m["chart.variant.threed.offsetx"]+D,C-m["chart.variant.threed.offsety"]),l.lineTo(B+r+D,C),l.closePath(),l.stroke(),l.fill()),l.beginPath(),l.moveTo(B+r+D,C),l.lineTo(B+r+D+m["chart.variant.threed.offsetx"],this.data[f]<0&&"bottom"===n?this.getYCoord(0):this.data[f]<0&&C-m["chart.variant.threed.offsety"]<this.gutterTop+this.halfgrapharea?this.gutterTop+this.halfgrapharea:C-m["chart.variant.threed.offsety"]),l.lineTo(B+r+D+m["chart.variant.threed.offsetx"],this.data[f]<0&&C-m["chart.variant.threed.offsety"]+A<this.gutterTop+this.getYCoord(0)?this.getYCoord(this.data[f])-m["chart.variant.threed.offsety"]:this.data[f]>0?C-m["chart.variant.threed.offsety"]+A:q.min(C-m["chart.variant.threed.offsety"]+A,j.height-this.gutterBottom)),l.lineTo(B+r+D,C+A),l.closePath(),l.stroke(),l.fill(),this.data[f]>0&&(l.beginPath(),l.fillStyle="rgba(255,255,255,0.5)",l.moveTo(B+r,C),l.lineTo(B+r+m["chart.variant.threed.offsetx"],C-m["chart.variant.threed.offsety"]),l.lineTo(B+r+m["chart.variant.threed.offsetx"]+D,C-m["chart.variant.threed.offsety"]),l.lineTo(B+r+D,C),l.lineTo(B+r,C),l.closePath(),l.stroke(),l.fill()),l.beginPath(),l.fillStyle="rgba(0,0,0,0.4)",l.moveTo(B+r+D,C),l.lineTo(B+r+D+m["chart.variant.threed.offsetx"],this.data[f]<0&&"bottom"===n?this.getYCoord(0):this.data[f]<0&&C-m["chart.variant.threed.offsety"]<this.gutterTop+this.halfgrapharea?this.gutterTop+this.halfgrapharea:C-m["chart.variant.threed.offsety"]),l.lineTo(B+r+D+m["chart.variant.threed.offsetx"],this.data[f]<0&&C-m["chart.variant.threed.offsety"]+A<this.getYCoord(0)?this.getYCoord(0):this.data[f]>0?C-m["chart.variant.threed.offsety"]+A:q.min(C-m["chart.variant.threed.offsety"]+A,j.height-this.gutterBottom)),l.lineTo(B+r+D,C+A),l.lineTo(B+r+D,C),l.closePath(),l.stroke(),l.fill(),l.strokeStyle=G,l.fillStyle=H}else if("glass"==h){var I=l.createLinearGradient(B+r,C,B+r+D/2,C);I.addColorStop(0,"rgba(255,255,255,0.9)"),I.addColorStop(1,"rgba(255,255,255,0.5)"),l.beginPath(),l.fillStyle=I,l.fillRect(B+r+2,C+(this.data[f]>0?2:0),D/2-2,A-2),l.fill()}}else"dot"==h?(l.beginPath(),l.moveTo(B+o/2,C),l.lineTo(B+o/2,C+A),l.stroke(),l.beginPath(),l.fillStyle=this.properties["chart.colors"][f],l.arc(B+o/2,C+(this.data[f]>0?0:A),2,0,6.28,0),l.fillStyle=m["chart.colors"][0],m["chart.colors.sequential"]&&(l.fillStyle=y[f]),l.stroke(),l.fill()):alert("[BAR] Warning! Unknown chart.variant: "+h);this.coords.push([B+r,C,o-2*r,A]),"undefined"==typeof this.coords2[f]&&(this.coords2[f]=[]),this.coords2[f].push([B+r,C,o-2*r,A])}else if(this.data[f]&&"object"==typeof this.data[f]&&"stacked"==m["chart.grouping"]){this.scale2.min&&alert("[ERROR] Stacked Bar charts with a Y min are not supported");var D=o-2*r,J=[],K=0,L=this.data[f];for(D<0&&alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient."),g=0;g<L.length;++g){if("center"==n)return void alert("[BAR] It's pointless having the X axis position at the center on a stacked bar chart.");if(this.data[f][g]<0)return void alert("[BAR] Negative values are not permitted with a stacked bar chart. Try a grouped one instead.");l.strokeStyle=x,l.fillStyle=y[g],m["chart.colors.reverse"]&&(l.fillStyle=y[this.data[f].length-g-1]),m["chart.colors.sequential"]&&y[z]?l.fillStyle=y[z++]:m["chart.colors.sequential"]&&(l.fillStyle=y[z-1]);var A=L[g]/this.scale2.max*(j.height-this.gutterTop-this.gutterBottom);"center"==n&&(A/=2);RGraph.array_sum(L)/this.scale2.max*(j.height-r-this.gutterTop-this.gutterBottom);if(this.coords.push([B+r,C,o-2*r,A]),"undefined"==typeof this.coords2[f]&&(this.coords2[f]=[]),this.coords2[f].push([B+r,C,o-2*r,A]),RGraph.ISOLD&&s&&this.DrawIEShadow([B+r,C,o-2*r,A+1]),A>0&&(l.strokeRect(B+r,C,o-2*r,A),l.fillRect(B+r,C,o-2*r,A)),0==g)var K=C,N=B;if(s&&J.push([B+r,C,o-2*r,A,l.fillStyle]),"3d"==h){var H=l.fillStyle,G=l.strokeStyle;0==g&&(l.beginPath(),l.moveTo(N+r,C),l.lineTo(N+m["chart.variant.threed.offsetx"]+r,C-m["chart.variant.threed.offsety"]),l.lineTo(N+m["chart.variant.threed.offsetx"]+D+r,C-m["chart.variant.threed.offsety"]),l.lineTo(N+D+r,C),l.closePath(),l.fill(),l.stroke()),l.beginPath(),l.moveTo(N+D+r,C),l.lineTo(N+D+r+m["chart.variant.threed.offsetx"],C-m["chart.variant.threed.offsety"]),l.lineTo(N+D+r+m["chart.variant.threed.offsetx"],C-m["chart.variant.threed.offsety"]+A),l.lineTo(N+D+r,C+A),l.closePath(),l.fill(),l.stroke(),0==g&&(l.fillStyle="rgba(255,255,255,0.5)",l.beginPath(),l.moveTo(N+r,C),l.lineTo(N+m["chart.variant.threed.offsetx"]+r,C-m["chart.variant.threed.offsety"]),l.lineTo(N+m["chart.variant.threed.offsetx"]+D+r,C-m["chart.variant.threed.offsety"]),l.lineTo(N+D+r,C),l.closePath(),l.fill(),l.stroke()),l.fillStyle="rgba(0,0,0,0.4)",l.beginPath(),l.moveTo(N+D+r,C),l.lineTo(N+D+r+m["chart.variant.threed.offsetx"],C-m["chart.variant.threed.offsety"]),l.lineTo(N+D+r+m["chart.variant.threed.offsetx"],C-m["chart.variant.threed.offsety"]+A),l.lineTo(N+D+r,C+A),l.closePath(),l.fill(),l.stroke(),l.strokeStyle=G,l.fillStyle=H}C+=A}if(s){for(RGraph.NoShadow(this),k=0;k<J.length;++k)l.strokeStyle=x,l.fillStyle=J[k][4],l.strokeRect(J[k][0],J[k][1],J[k][2],J[k][3]),l.fillRect(J[k][0],J[k][1],J[k][2],J[k][3]),l.stroke(),l.fill();J=[]}}else if(this.data[f]&&"object"==typeof this.data[f]&&"grouped"==m["chart.grouping"]){var J=[];for(l.lineWidth=m["chart.linewidth"],g=0;g<this.data[f].length;++g){l.strokeStyle=x,l.fillStyle=y[g],m["chart.colors.sequential"]&&y[z]?l.fillStyle=y[z++]:m["chart.colors.sequential"]&&(l.fillStyle=y[z-1]);var O=(o-2*r)/this.data[f].length,A=(this.data[f][g]+(this.data[f][g]<0?this.scale2.min:-1*this.scale2.min))/(this.scale2.max-this.scale2.min)*(j.height-this.gutterTop-this.gutterBottom),P=m["chart.hmargin.grouped"],N=B+r+g*O;if(O<0&&alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient."),"center"==n&&(A/=2),"top"==n)var K=this.gutterTop,A=Math.abs(A);else if("center"==n)var K=this.gutterTop+this.grapharea/2-A;else{var K=this.getYCoord(0),A=q.abs(q.abs(this.getYCoord(this.data[f][g]))-this.getYCoord(0));this.data[f][g]>=0&&(K-=A)}if(l.strokeRect(N+P,K,O-2*P,A),l.fillRect(N+P,K,O-2*P,A),C+=A,"3d"==h){var H=l.fillStyle,G=l.strokeStyle,Q=m["chart.hmargin.grouped"];this.data[f][g]>=0&&(l.beginPath(),l.moveTo(N+Q,K),l.lineTo(N+Q+m["chart.variant.threed.offsetx"],K-m["chart.variant.threed.offsety"]),l.lineTo(N+m["chart.variant.threed.offsetx"]+O-Q,K-m["chart.variant.threed.offsety"]),l.lineTo(N+O-Q,K),l.closePath(),l.fill(),l.stroke()),l.beginPath(),l.moveTo(N+O-Q-1,K),l.lineTo(N+O-Q+m["chart.variant.threed.offsetx"],this.data[f][g]<0?this.getYCoord(0)+q.abs(A)-m["chart.variant.threed.offsety"]:this.getYCoord(0)-A-m["chart.variant.threed.offsety"]),l.lineTo(N+O-Q+m["chart.variant.threed.offsetx"],this.data[f][g]<0&&K+A-m["chart.variant.threed.offsety"]<this.gutterTop+this.halfgrapharea?this.gutterTop+this.halfgrapharea:K+A-m["chart.variant.threed.offsety"]),l.lineTo(N+O-Q-1,K+A),l.closePath(),l.fill(),l.stroke(),this.data[f][g]>=0&&(l.fillStyle="rgba(255,255,255,0.5)",l.beginPath(),l.moveTo(N+Q,K),l.lineTo(N+Q+m["chart.variant.threed.offsetx"],K-m["chart.variant.threed.offsety"]),l.lineTo(N+m["chart.variant.threed.offsetx"]+O-Q,K-m["chart.variant.threed.offsety"]),l.lineTo(N+O-Q,K),l.closePath(),l.fill(),l.stroke()),l.fillStyle="rgba(0,0,0,0.4)",l.beginPath(),l.moveTo(N+O-Q,K),l.lineTo(N+O+m["chart.variant.threed.offsetx"]-Q,this.data[f][g]<0?this.getYCoord(0)+q.abs(A)-m["chart.variant.threed.offsety"]:this.getYCoord(0)-A-m["chart.variant.threed.offsety"]),l.lineTo(N+O+m["chart.variant.threed.offsetx"]-Q,this.data[f][g]<0&&K+A-5<this.gutterTop+this.halfgrapharea?this.gutterTop+this.halfgrapharea:K+A-m["chart.variant.threed.offsety"]),l.lineTo(N+O-Q,K+A),l.closePath(),l.fill(),l.stroke(),l.strokeStyle=G,l.fillStyle=H}A<0&&(A=Math.abs(A),K-=A),this.coords.push([N+P,K,O-2*P,A]),"undefined"==typeof this.coords2[f]&&(this.coords2[f]=[]),this.coords2[f].push([N+P,K,O-2*P,A]),m["chart.shadow"]&&J.push([N+P,K,O-2*P,A,l.fillStyle])}if(J.length){RGraph.NoShadow(this),l.lineWidth=m["chart.linewidth"],l.beginPath();for(var g=0;g<J.length;++g)l.fillStyle=J[g][4],l.strokeStyle=m["chart.strokecolor"],l.fillRect(J[g][0],J[g][1],J[g][2],J[g][3]),l.strokeRect(J[g][0],J[g][1],J[g][2],J[g][3]);l.fill(),l.stroke(),J=[]}}else this.coords.push([]);l.closePath()}"3d"===m["chart.variant"]&&"right"===m["chart.yaxispos"]&&i.draw3DYAxis(this),RGraph.noShadow(this)},this.drawLabels=this.DrawLabels=function(){var c=(m["chart.text.angle"],m["chart.text.size"]),d=m["chart.labels"];if(m["chart.ylabels"]&&("top"==m["chart.xaxispos"]&&this.Drawlabels_top(),"center"==m["chart.xaxispos"]&&this.Drawlabels_center(),"bottom"==m["chart.xaxispos"]&&this.Drawlabels_bottom()),"object"==typeof d&&d){var e=Number(m["chart.labels.offsety"]),f=Number(m["chart.labels.offsetx"]),g=m["chart.labels.bold"];if(0!=m["chart.text.angle"])var h="center",k="right",n=0-m["chart.text.angle"];else var h="top",k="center",n=0;l.fillStyle=m["chart.labels.color"]||m["chart.text.color"];(j.width-this.gutterRight-this.gutterLeft)/d.length;xTickGap=(j.width-this.gutterRight-this.gutterLeft)/d.length;var p=0,q=m["chart.text.font"];for(x=this.gutterLeft+xTickGap/2;x<=j.width-this.gutterRight;x+=xTickGap)i.text2(this,{font:q,size:c,
    x:x+f,y:"top"==m["chart.xaxispos"]?this.gutterTop+e-5:j.height-this.gutterBottom+e+3,bold:g,text:String(d[p++]),valign:"top"==m["chart.xaxispos"]?"bottom":h,halign:k,tag:"label",marker:!1,angle:n,tag:"labels"})}this.drawAboveLabels()},this.drawlabels_top=this.Drawlabels_top=function(){var a=this.canvas,b=this.context,c=this.properties;if(b.beginPath(),b.fillStyle=c["chart.text.color"],b.strokeStyle="black","top"==c["chart.xaxispos"]){var e=c["chart.text.size"],f=c["chart.units.pre"],g=c["chart.units.post"],h="left"==c["chart.yaxispos"]?"right":"left",j=c["chart.text.font"],m=(c["chart.ylabels.count"],c["chart.ymin"],c["chart.ylabels.offsetx"]),n=c["chart.ylabels.offsety"];if(1==c["chart.ylabels.inside"])var o="left"==c["chart.yaxispos"]?this.gutterLeft+5:a.width-this.gutterRight-5,h="left"==c["chart.yaxispos"]?"left":"right",p=!0;else var o="left"==c["chart.yaxispos"]?this.gutterLeft-5:a.width-this.gutterRight+5,p=!1;if("object"==typeof c["chart.ylabels.specific"]&&c["chart.ylabels.specific"]){for(var q=RGraph.array_reverse(c["chart.ylabels.specific"]),r=a.height-this.gutterTop-this.gutterBottom,s=0;s<q.length;++s){var t=this.gutterTop+r*(s/q.length)+r/q.length;i.text2(this,{font:j,size:e,x:o+m,y:t+n,text:String(q[s]),valign:"center",halign:h,bordered:p,tag:"scale"})}return}for(var q=this.scale2.labels,s=0;s<q.length;++s)RGraph.Text2(this,{font:j,size:e,x:o+m,y:this.gutterTop+this.grapharea/q.length*(s+1)+n,text:"-"+q[s],valign:"center",halign:h,bordered:p,tag:"scale"});(0!=c["chart.ymin"]||c["chart.noxaxis"]||c["chart.scale.zerostart"])&&RGraph.Text2(this,{font:j,size:e,x:o+m,y:this.gutterTop+n,text:(0!=this.scale2.min?"-":"")+RGraph.numberFormat(this,this.scale2.min.toFixed(0===this.scale2.min?0:c["chart.scale.decimals"]),f,g),valign:"center",halign:h,bordered:p,tag:"scale"})}b.fill()},this.drawlabels_center=this.Drawlabels_center=function(){var a=this.canvas,b=this.context,c=this.properties,d=c["chart.text.font"],e=c["chart.ylabels.count"];if(b.fillStyle=c["chart.text.color"],"center"==c["chart.xaxispos"]){var f=c["chart.text.size"],g=c["chart.units.pre"],h=c["chart.units.post"],k="",l=0,m=!1,o=(c["chart.ymin"],c["chart.ylabels.offsetx"]),p=c["chart.ylabels.offsety"];if(b.fillStyle=c["chart.text.color"],b.strokeStyle="black",1==c["chart.ylabels.inside"])var l="left"==c["chart.yaxispos"]?this.gutterLeft+5:a.width-this.gutterRight-5,k="left"==c["chart.yaxispos"]?"left":"right",m=!0;else var l="left"==c["chart.yaxispos"]?this.gutterLeft-5:a.width-this.gutterRight+5,k="left"==c["chart.yaxispos"]?"right":"left",m=!1;if("object"==typeof c["chart.ylabels.specific"]&&c["chart.ylabels.specific"]){for(var q=c["chart.ylabels.specific"],r=a.height-this.gutterTop-this.gutterBottom,s=0;s<q.length;++s){var t=this.gutterTop+r/2/(q.length-1)*s;RGraph.Text2(this,{font:d,size:f,x:l+o,y:t+p,text:String(q[s]),valign:"center",halign:k,bordered:m,tag:"scale"})}for(var s=q.length-1;s>=1;--s){var t=this.gutterTop+r*(s/(2*(q.length-1)))+r/2;i.Text2(this,{font:d,size:f,x:l+o,y:t+p,text:String(q[q.length-s-1]),valign:"center",halign:k,bordered:m,tag:"scale"})}return}for(var s=0;s<this.scale2.labels.length;++s){var t=this.gutterTop+this.halfgrapharea-this.halfgrapharea/e*(s+1),u=this.scale2.labels[s];i.Text2(this,{font:d,size:f,x:l+o,y:t+p,text:u,valign:"center",halign:k,bordered:m,tag:"scale"})}for(var s=this.scale2.labels.length-1;s>=0;--s){var t=this.gutterTop+this.halfgrapharea/e*(s+1)+this.halfgrapharea,u=this.scale2.labels[s];i.Text2(this,{font:d,size:f,x:l+o,y:t+p,text:"-"+u,valign:"center",halign:k,bordered:m,tag:"scale"})}(0!=this.scale2.min||c["chart.scale.zerostart"])&&i.Text2(this,{font:d,size:f,x:l+o,y:this.gutterTop+this.halfgrapharea+p,text:i.number_format(this,this.scale2.min.toFixed(0===this.scale2.min?0:c["chart.scale.decimals"]),g,h),valign:"center",valign:"center",halign:k,bordered:m,tag:"scale"})}},this.drawlabels_bottom=this.Drawlabels_bottom=function(){var a=m["chart.text.size"],b=m["chart.units.pre"],c=m["chart.units.post"],e=(this.context,"left"==m["chart.yaxispos"]?"right":"left"),f=m["chart.text.font"],g=m["chart.ylabels.count"],k=(m["chart.ymin"],m["chart.ylabels.offsetx"]),n=m["chart.ylabels.offsety"];if(l.beginPath(),l.fillStyle=m["chart.text.color"],l.strokeStyle="black",1==m["chart.ylabels.inside"])var o="left"==m["chart.yaxispos"]?this.gutterLeft+5:j.width-this.gutterRight-5,e="left"==m["chart.yaxispos"]?"left":"right",p=!0;else var o="left"==m["chart.yaxispos"]?this.gutterLeft-5:j.width-this.gutterRight+5,p=!1;if(m["chart.ylabels.specific"]&&"object"==typeof m["chart.ylabels.specific"])for(var q=m["chart.ylabels.specific"],r=j.height-this.gutterTop-this.gutterBottom,s=0;s<q.length;++s){var t=this.gutterTop+r*(s/(q.length-1));RGraph.Text2(this,{font:f,size:a,x:o+k,y:t+n,text:q[s],valign:"center",halign:e,bordered:p,tag:"scale"})}else{for(var s=(this.gutterTop,this.halfTextHeight,this.scale,0);s<g;++s){var x=this.scale2.labels[s];RGraph.Text2(this,{font:f,size:a,x:o+k,y:this.gutterTop+this.grapharea-this.grapharea/g*(s+1)+n,text:x,valign:"center",halign:e,bordered:p,tag:"scale"})}(0!=m["chart.ymin"]||m["chart.noxaxis"]||m["chart.scale.zerostart"])&&i.text2(this,{font:f,size:a,x:o+k,y:j.height-this.gutterBottom+n,text:i.numberFormat(this,this.scale2.min.toFixed(0===this.scale2.min?0:m["chart.scale.decimals"]),b,c),valign:"center",halign:e,bordered:p,tag:"scale"}),l.fill()}},this.drawIEShadow=this.DrawIEShadow=function(a){var b=this.context,d=(this.canvas,this.properties),e=b.fillStyle,f=d["chart.shadow.offsetx"],g=d["chart.shadow.offsety"];b.lineWidth=d["chart.linewidth"],b.fillStyle=d["chart.shadow.color"],b.beginPath(),b.fillRect(a[0]+f,a[1]+g,a[2],a[3]),b.fill(),b.fillStyle=e},this.getShape=this.getBar=function(a){for(var b=arguments[1]?arguments[1]:this,c=i.getMouseXY(a),d=c[0],e=c[1],h=(b.canvas,b.context,b.coords),k=0,m=h.length;k<m;k+=1)if(0!=b.coords[k].length){var o=h[k][0],p=h[k][1],q=h[k][2],r=h[k][3],s=b.properties;if(s["chart.tooltips.hotspot.xonly"]?n(l,"b r % % % %",o,this.gutterTop,q,j.height-this.gutterBottom):n(l,"b r % % % %",o,p,q,r),l.isPointInPath(d,e)){if(s["chart.tooltips"])var t=i.parseTooltipText?i.parseTooltipText(s["chart.tooltips"],k):s["chart.tooltips"][k];for(var u=0,v=k;v>=("object"==typeof b.data[u]&&b.data[u]?b.data[u].length:1);)v-="number"==typeof b.data[u]?1:b.data[u]?b.data[u].length:1,u++;return"number"==typeof b.data[u]&&(v=null),{0:b,1:o,2:p,3:q,4:r,5:k,object:b,x:o,y:p,width:q,height:r,index:k,tooltip:t,index_adjusted:v,dataset:u}}}return null},this.getShapeByX=function(a){for(var c=(a.target,RGraph.getMouseXY(a)),d=arguments[1]?arguments[1]:this,e=0,f=d.coords.length;e<f;e++)if(0!=d.coords[e].length){var g=c[0],i=(c[1],d.coords[e][0]),j=d.coords[e][1],k=d.coords[e][2],l=d.coords[e][3],m=d.properties;if(g>=i&&g<=i+k){if(m["chart.tooltips"])var n=RGraph.parseTooltipText?RGraph.parseTooltipText(m["chart.tooltips"],e):m["chart.tooltips"][e];return{0:d,1:i,2:j,3:k,4:l,5:e,object:d,x:i,y:j,width:k,height:l,index:e,tooltip:n}}}return null},this.getValue=function(a){var c=(this.context,this.canvas),d=this.properties;if(2==a.length)var e=a[0],f=a[1];else var g=i.getMouseXY(a),e=g[0],f=g[1];if(f<d["chart.gutter.top"]||f>c.height-d["chart.gutter.bottom"]||e<d["chart.gutter.left"]||e>c.width-d["chart.gutter.right"])return null;if("center"==d["chart.xaxispos"]){var h=(this.grapharea/2-(f-d["chart.gutter.top"]))/this.grapharea*(this.scale2.max-this.scale2.min);h*=2,h>=0?h+=this.scale2.min:h-=this.scale2.min}else if("top"==d["chart.xaxispos"]){var h=(this.grapharea-(f-d["chart.gutter.top"]))/this.grapharea*(this.scale2.max-this.scale2.min);h=this.scale2.max-h,h=q.abs(h)*-1}else{var h=(this.grapharea-(f-d["chart.gutter.top"]))/this.grapharea*(this.scale2.max-this.scale2.min);h+=this.scale2.min}return h},this.getYCoord=function(a){if(a>this.scale2.max)return null;var e,c=(this.context,this.canvas),d=this.properties,f=d["chart.xaxispos"];return"top"==f?(a<0&&(a=q.abs(a)),e=(a-this.scale2.min)/(this.scale2.max-this.scale2.min)*this.grapharea,e+=this.gutterTop):"center"==f?(e=(a-this.scale2.min)/(this.scale2.max-this.scale2.min)*(this.grapharea/2),e=this.grapharea/2-e,e+=this.gutterTop):(a<this.scale2.min&&(a=this.scale2.min),e=(a-this.scale2.min)/(this.scale2.max-this.scale2.min),e*=c.height-this.gutterTop-this.gutterBottom,e=c.height-this.gutterBottom-e),e},this.highlight=this.Highlight=function(a){"function"==typeof m["chart.highlight.style"]?m["chart.highlight.style"](a):i.Highlight.Rect(this,a)},this.getObjectByXY=function(a){var b=i.getMouseXY(a);if("3d"===m["chart.variant"]){var c=m["chart.variant.threed.angle"]*b[0];b[1]-=c}if(b[0]>=m["chart.gutter.left"]&&b[0]<=j.width-m["chart.gutter.right"]&&b[1]>=m["chart.gutter.top"]&&b[1]<=j.height-m["chart.gutter.bottom"])return this},this.adjusting_mousemove=this.Adjusting_mousemove=function(a){if(m["chart.adjustable"]&&i.Registry.Get("chart.adjusting")&&i.Registry.Get("chart.adjusting").uid==this.uid){var b=Number(this.getValue(a)),c=i.Registry.Get("chart.adjusting.shape");if(c){if(i.Registry.Set("chart.adjusting.shape",c),this.stackedOrGrouped&&"grouped"==m["chart.grouping"]){var d=i.sequentialIndexToGrouped(c.index,this.data);"number"==typeof this.data[d[0]]?this.data[d[0]]=Number(b):i.isNull(this.data[d[0]])||(this.data[d[0]][d[1]]=Number(b))}else"number"==typeof this.data[c.index]&&(this.data[c.index]=Number(b));i.redrawCanvas(a.target),i.fireCustomEvent(this,"onadjust")}}},this.parseColors=function(){0===this.original_colors.length&&(this.original_colors["chart.colors"]=RGraph.array_clone(m["chart.colors"]),this.original_colors["chart.key.colors"]=RGraph.array_clone(m["chart.key.colors"]),this.original_colors["chart.crosshairs.color"]=m["chart.crosshairs.color"],this.original_colors["chart.highlight.stroke"]=m["chart.highlight.stroke"],this.original_colors["chart.highlight.fill"]=m["chart.highlight.fill"],this.original_colors["chart.text.color"]=m["chart.text.color"],this.original_colors["chart.background.barcolor1"]=m["chart.background.barcolor1"],this.original_colors["chart.background.barcolor2"]=m["chart.background.barcolor2"],this.original_colors["chart.background.grid.color"]=m["chart.background.grid.color"],this.original_colors["chart.background.color"]=m["chart.background.color"],this.original_colors["chart.strokecolor"]=m["chart.strokecolor"],this.original_colors["chart.axis.color"]=m["chart.axis.color"]);var a=m["chart.colors"];if(a)for(var b=0;b<a.length;++b)a[b]=this.parseSingleColorForGradient(a[b]);var a=m["chart.key.colors"];if(a)for(var b=0;b<a.length;++b)a[b]=this.parseSingleColorForGradient(a[b]);m["chart.crosshairs.color"]=this.parseSingleColorForGradient(m["chart.crosshairs.color"]),m["chart.highlight.stroke"]=this.parseSingleColorForGradient(m["chart.highlight.stroke"]),m["chart.highlight.fill"]=this.parseSingleColorForGradient(m["chart.highlight.fill"]),m["chart.text.color"]=this.parseSingleColorForGradient(m["chart.text.color"]),m["chart.background.barcolor1"]=this.parseSingleColorForGradient(m["chart.background.barcolor1"]),m["chart.background.barcolor2"]=this.parseSingleColorForGradient(m["chart.background.barcolor2"]),m["chart.background.grid.color"]=this.parseSingleColorForGradient(m["chart.background.grid.color"]),m["chart.background.color"]=this.parseSingleColorForGradient(m["chart.background.color"]),m["chart.strokecolor"]=this.parseSingleColorForGradient(m["chart.strokecolor"]),m["chart.axis.color"]=this.parseSingleColorForGradient(m["chart.axis.color"])},this.reset=function(){},this.parseSingleColorForGradient=function(a){if(!a||"string"!=typeof a)return a;if(a.match(/^gradient\((.*)\)$/i)){var b=RegExp.$1.split(":"),c=l.createLinearGradient(0,j.height-m["chart.gutter.bottom"],0,m["chart.gutter.top"]),d=1/(b.length-1);c.addColorStop(0,i.trim(b[0]));for(var e=1,f=b.length;e<f;++e)c.addColorStop(e*d,RGraph.trim(b[e]))}return c?c:a},this.drawBevel=this.DrawBevel=function(){var a=this.coords,b=this.coords2,c=this.properties,d=this.context,e=this.canvas;if("stacked"==c["chart.grouping"]){for(var f=0;f<b.length;++f)if(b[f]&&b[f][0]&&b[f][0][0]){for(var g=b[f][0][0],h=b[f][0][1],i=b[f][0][2],j=[],k=0;k<b[f].length;++k)j.push(b[f][k][3]);var l=RGraph.array_sum(j);d.save(),d.strokeStyle="black",d.beginPath(),d.rect(g,h,i,l),d.clip(),d.shadowColor="black",d.shadowOffsetX=0,d.shadowOffsetY=0,d.shadowBlur=20,d.beginPath(),d.rect(g-3,h-3,i+6,l+100),d.lineWidth=5,d.stroke(),d.restore()}}else for(var f=0;f<a.length;++f)if(a[f]){var g=a[f][0],h=a[f][1],i=a[f][2],l=a[f][3],m=c["chart.xaxispos"],n=(e.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop;d.save(),d.strokeStyle="black",d.beginPath(),d.rect(g,h,i,l),d.clip(),d.shadowColor="black",d.shadowOffsetX=0,d.shadowOffsetY=0,d.shadowBlur=20,"top"==m||"center"==m&&h+l>n?(h-=100,l+=100):(h=h,l+=100),d.beginPath(),d.rect(g-3,h-3,i+6,l+6),d.lineWidth=5,d.stroke(),d.restore()}},this.interactiveKeyHighlight=function(a){this.coords2.forEach(function(b,c,d){if("object"==typeof b[a]&&b[a]){var e=b[a][0],f=b[a][1],g=b[a][2],h=b[a][3];l.fillStyle=m["chart.key.interactive.highlight.chart.fill"],l.strokeStyle=m["chart.key.interactive.highlight.chart.stroke"],l.lineWidth=2,l.strokeRect(e,f,g,h),l.fillRect(e,f,g,h)}})},this.on=function(a,b){return"on"!==a.substr(0,2)&&(a="on"+a),"function"!=typeof this[a]?this[a]=b:i.addCustomEventListener(this,a,b),this},this.drawAboveLabels=function(){var a=m["chart.labels.above"],b=m["chart.labels.above.specific"],c=m["chart.labels.above.color"],d=m["chart.labels.above.background"],e=m["chart.labels.above.decimals"],f=m["chart.labels.above.size"],g=-1*m["chart.labels.above.angle"],h=m["chart.labels.above.units.pre"],j=m["chart.labels.above.units.post"],n=(this.coords,this.coords2),o=this.data,q=(i.arrayLinearize(this.data),m["chart.labels.above.offset"]),r=m["chart.text.font"],s=m["chart.text.size"],t=m["chart.grouping"];if(i.noShadow(this),l.fillStyle="string"==typeof c?c:m["chart.text.color"],a&&"grouped"===t){for(var u=0,v=o.length,w=0;u<v;u+=1)if("number"==typeof o[u]&&o[u]>=0){var g=g,x=g?"left":"center",y=0!==g?"center":"bottom";i.text2(this,{font:r,size:"number"==typeof f?f:s-3,x:n[u][0][0]+n[u][0][2]/2,y:n[u][0][1]-q,text:b?b[w]||"":i.numberFormat(this,Number("object"==typeof o[u]?o[u][0]:o[u]).toFixed(e),h,j),halign:x,valign:y,angle:g,marker:!1,bounding:!0,"bounding.fill":d,"bounding.stroke":"rgba(0,0,0,0)",tag:"labels.above"}),w++}else if("number"==typeof o[u]&&o[u]<0){var g=g,x=g?"right":"center",y=0!==g?"center":"top";i.text2(this,{font:r,size:"number"==typeof f?f:s-3,x:n[u][0][0]+n[u][0][2]/2,y:n[u][0][1]+n[u][0][3]+q,text:b?b[w]||"":i.numberFormat(this,Number("object"==typeof o[u]?o[u][0]:o[u]).toFixed(e),h,j),halign:x,valign:y,angle:g,bounding:!0,"bounding.fill":d,"bounding.stroke":"rgba(0,0,0,0)",marker:!1,tag:"labels.above"}),w++}else if("object"==typeof o[u])for(var z=0,A=o[u].length;z<A;z+=1){var g=g,x=o[u][z]<0?"right":"left";x=0===g?"center":x;var y=o[u][z]<0?"top":"bottom";y=0!=g?"center":y,i.text2(this,{font:r,size:"number"==typeof f?f:s-3,x:n[u][z][0]+n[u][z][2]/2,y:n[u][z][1]+(o[u][z]<0?n[u][z][3]+q:-q),text:b?b[w]||"":i.numberFormat(this,Number(o[u][z]).toFixed(e),h,j),halign:x,valign:y,angle:g,bounding:!0,"bounding.fill":d,"bounding.stroke":"rgba(0,0,0,0)",marker:!1,tag:"labels.above"}),w++}}else if(a&&"stacked"===t)for(var u=0,v=o.length,w=0;u<v;u+=1)if("object"==typeof o[u]){var g=g,x=0!=g?"left":"center",y=0!=g?"center":"bottom";i.text2(this,{font:r,size:"number"==typeof f?f:s-3,x:n[u][0][0]+n[u][0][2]/2,y:n[u][0][1]+(o[u][0]<0?n[u][0][3]:0)-q,text:b?b[w]||"":i.numberFormat(this,Number(i.arraySum(o[u])).toFixed(e),h,j),halign:x,valign:y,angle:g,bounding:!0,"bounding.fill":d,"bounding.stroke":"rgba(0,0,0,0)",marker:!1,tag:"labels.above"}),w+=o[u].length}else{var g=g,x=0!=g?"left":"center",y=0!=g?"center":"bottom";i.text2(this,{font:r,size:"number"==typeof f?f:s-3,x:n[u][0][0]+n[u][0][2]/2,y:n[u][0][1]+(o[u][0]<0?n[u][0][3]:0)-q,text:b?b[w]||"":i.numberFormat(this,Number(o[u]).toFixed(e),h,j),halign:x,valign:y,angle:g,bounding:!0,"bounding.fill":d,"bounding.stroke":"rgba(0,0,0,0)",marker:!1,tag:"labels.above"}),w++}},this.firstDrawFunc=function(){},this.wave=function(){function l(){++e;for(var h=0,j=a.data.length;h<j;h+=1)if(e>b.startFrames[h]){if("number"==typeof a.data[h])a.data[h]=q.min(q.abs(g[h]),q.abs(g[h]*(b.counters[h]++/d))),g[h]<0&&(a.data[h]*=-1);else if(!i.isNull(a.data[h]))for(var k=0,m=a.data[h].length;k<m;k+=1)a.data[h][k]=q.min(q.abs(g[h][k]),q.abs(g[h][k]*(b.counters[h][k]++/d))),g[h][k]<0&&(a.data[h][k]*=-1)}else a.data[h]="object"==typeof a.data[h]&&a.data[h]?i.arrayPad([],a.data[h].length,0):i.isNull(a.data[h])?null:0;e>=b.frames?(c&&(a.set("labelsAbove",!0),i.redraw()),f(a)):(i.redrawCanvas(a.canvas),i.Effects.updateCanvas(l))}var a=this,b=arguments[0]||{},c=this.get("labelsAbove");b.frames=b.frames||60,b.startFrames=[],b.counters=[];var d=b.frames/3,e=-1,f=arguments[1]||function(){},g=i.arrayClone(this.original_data);this.set("labelsAbove",!1);for(var h=0,j=a.data.length;h<j;h+=1)if(b.startFrames[h]=b.frames/2/(a.data.length-1)*h,"object"==typeof a.data[h]&&a.data[h]){b.counters[h]=[];for(var k=0;k<a.data[h].length;k++)b.counters[h][k]=0}else b.counters[h]=0;return a.draw(),a.Set("ymax",a.scale2.max),i.clear(a.canvas),l(),this},this.colorWave=function(){function j(){++d;for(var f=0,g=colors.length;f<g;f+=1)d>b.startFrames[f]&&colors[f].match(/^rgba?\(([0-9 ]+),([0-9 ]+),([0-9 ]+)(,([ 0-9.]+)?)\)/)?colors[f]="rgba({1},{2},{3},{4})".format(RegExp.$1,RegExp.$2,RegExp.$3,(d-b.startFrames[f])/c):colors[f]=colors[f].replace(/,[0-9. ]+\)/,",0)");d>=b.frames?e(a):(i.redrawCanvas(a.canvas),i.Effects.updateCanvas(j))}var a=this,b=arguments[0]||{};b.frames=b.frames||60,b.startFrames=[],b.counters=[],colors=a.properties["chart.colors"],colors.length<=a.data.length&&(a.set("chart.colors.sequential",!0),colors=i.arrayPad(colors,a.data.length,colors[colors.length-1]));for(var c=b.frames/2,d=-1,e=arguments[1]||function(){},f=i.arrayClone(a.properties["chart.colors"]),g=0,h=f.length;g<h;g+=1)b.startFrames[g]=b.frames/2/(f.length-1)*g,b.counters[g]=0;return j(),this},this.grow=function(){var a=arguments[0]||{},b=a.frames||30,c=0,e=arguments[1]||function(){},f=this,g=this.get("labelsAbove");if(i.isArray(a.data)){for(var h=0,j=0;j<a.data.length;++j)if("object"==typeof a.data[j])for(var k=0;k<a.data[j].length;++k)"string"==typeof a.data[j][k]&&a.data[j][k].match(/(\+|\-)([0-9]+)/)&&("+"===RegExp.$1?a.data[j][k]=this.original_data[j][k]+parseInt(RegExp.$2):a.data[j][k]=this.original_data[j][k]-parseInt(RegExp.$2)),h=q.max(h,a.data[j][k]);else"string"==typeof a.data[j]&&a.data[j].match(/(\+|\-)([0-9]+)/)?("+"===RegExp.$1?a.data[j]=this.original_data[j]+parseInt(RegExp.$2):a.data[j]=this.original_data[j]-parseInt(RegExp.$2),h=q.max(h,a.data[j])):h=q.max(h,a.data[j]);var l=i.getScale2(this,{max:h});this.Set("chart.ymax",l.max)}if(this.set("labelsAbove",!1),null==m["chart.ymax"]){for(var h=0,j=0;j<f.data.length;++j)if(i.isArray(this.data[j])&&"stacked"===m["chart.grouping"])h=q.max(h,q.abs(i.arraySum(this.data[j])));else if(i.isArray(this.data[j])&&"grouped"===m["chart.grouping"]){for(var k=0,n=[];k<this.data[j].length;k++)n.push(q.abs(this.data[j][k]));h=q.max(h,q.abs(i.arrayMax(n)))}else h=q.max(h,q.abs(this.data[j]));var l=i.getScale2(this,{max:h});this.Set("chart.ymax",l.max)}"number"==typeof a.ymax&&f.set("ymax",a.ymax);var o=function(){for(var h=i.Effects.getEasingMultiplier(b,c),j=0,k=f.original_data.length;j<k;++j)if("object"!=typeof f.data[j]||i.isNull(f.data[j])){if(f.firstDraw||!a.data)f.data[j]=h*f.original_data[j];else if(a.data&&a.data.length===f.original_data.length){var n=a.data[j]-f.original_data[j];f.data[j]=h*n+f.original_data[j]}}else for(var l=0,m=f.data[j].length;l<m;++l)if(f.firstDraw||!a.data)f.data[j][l]=h*f.original_data[j][l];else if(a.data&&a.data.length===f.original_data.length){var n=a.data[j][l]-f.original_data[j][l];f.data[j][l]=h*n+f.original_data[j][l]}if(i.redrawCanvas(f.canvas),c<b)c+=1,i.Effects.updateCanvas(o);else{if(i.isArray(a.data))for(var p=i.arrayLinearize(d),q=0;q<p.length;++q)f["$"+q]||(f["$"+q]={});f.data=d,f.original_data=i.arrayClone(d),g&&(f.set("labelsAbove",!0),i.redraw()),e(f)}};return o(),this},this.drawErrorbars=function(){var a=this.coords,b=m["chart.errorbars.color"]||"black",c=q.min(m["chart.errorbars.capped.width"],a[0][2])/2,e=m["chart.errorbars"],f=0;m["chart.errorbars.capped"]||(m["chart.errorbars.capped.width"]=0,h=0),l.lineWidth=m["chart.errorbars.linewidth"];for(var g=0;g<a.length;++g){b=m["chart.errorbars.color"]||"black",e[g]&&"number"==typeof e[g][3]&&(l.lineWidth=e[g][3]);var h=e[g]&&"number"==typeof e[g][4]?e[g][4]/2:c;if(m["chart.errorbars.capped"]||(h=0),"number"==typeof e[g])f=q.abs(this.getYCoord(e[g])-this.getYCoord(0)),f&&n(l,"b m % % l % % l % % l % % s %",a[g][0]+a[g][2]/2,a[g][1],a[g][0]+a[g][2]/2,a[g][1]-f,a[g][0]+a[g][2]/2-h,q.round(a[g][1]-f),a[g][0]+a[g][2]/2+h,q.round(a[g][1]-f),b);else if("object"==typeof e[g]&&!i.isNull(e[g])){var j=q.abs(this.getYCoord(e[g][0])-this.getYCoord(0));if("string"==typeof e[g][1]?b=e[g][1]:"string"==typeof e[g][2]&&(b=e[g][2]),h="number"==typeof e[g][4]?e[g][4]/2:c,m["chart.errorbars.capped"]||(h=0),i.isNull(e[g][0])||n(l,"b m % % l % % l % % l % % s %",a[g][0]+a[g][2]/2,a[g][1],a[g][0]+a[g][2]/2,a[g][1]-j,a[g][0]+a[g][2]/2-h,q.round(a[g][1]-j),a[g][0]+a[g][2]/2+h,q.round(a[g][1]-j),b),"number"==typeof e[g][1]){var k=q.abs(this.getYCoord(e[g][1])-this.getYCoord(0));n(l,"b m % % l % % l % % l % % s %",a[g][0]+a[g][2]/2,a[g][1],a[g][0]+a[g][2]/2,a[g][1]+k,a[g][0]+a[g][2]/2-h,q.round(a[g][1]+k),a[g][0]+a[g][2]/2+h,q.round(a[g][1]+k),b)}}e[g]&&"number"==typeof e[g][3]&&(l.lineWidth=m["chart.errorbars.linewidth"])}},this.isAdjustable=function(a){return!(!i.isNull(m["chart.adjustable.only"])&&i.isArray(m["chart.adjustable.only"]))||!(!i.isArray(m["chart.adjustable.only"])||!m["chart.adjustable.only"][a.index])},i.register(this),e&&i.parseObjectStyleConfig(this,a.options)},RGraph.CombinedChart=function(){function e(a){var b=a.get("gutterLeft"),c=a.get("gutterRight");a.set("hmargin",(a.canvas.width-b-c)/(2*a.original_data[0].length))}this.objects=[];var a=[];if(RGraph.isArray(arguments[0]))a=arguments[0];else for(var b=0;b<arguments.length;b+=1)a[b]=arguments[b];for(var b=0;b<a.length;++b){if(this.objects[b]=a[b],this.objects[b].set({gutterLeft:this.objects[0].get("gutter.left"),gutterRight:this.objects[0].get("gutter.right"),gutterTop:this.objects[0].get("gutter.top"),gutterBottom:this.objects[0].get("gutter.bottom")}),"line"==this.objects[b].type){var c=this.objects[b];c.set("hmargin",(this.objects[0].canvas.width-this.objects[0].Get("chart.gutter.right")-this.objects[0].Get("chart.gutter.left"))/this.objects[0].data.length/2),c.set("noaxes",!0),c.set("backgroundGrid",!1),c.set("ylabels",!1)}if(this.objects[b].get("chart.resizable"))var d=c}d&&RGraph.AddCustomEventListener(d,"onresizebeforedraw",e)},RGraph.CombinedChart.prototype.add=RGraph.CombinedChart.prototype.Add=function(a){this.objects.push(a)},RGraph.CombinedChart.prototype.draw=RGraph.CombinedChart.prototype.Draw=function(){for(var i=0;i<this.objects.length;++i)if(this.objects[i].properties["chart.combinedchart.effect"]){var options=this.objects[i].properties["chart.combinedchart.effect.options"]?eval("("+this.objects[i].properties["chart.combinedchart.effect.options"]+")"):null;this.objects[i][this.objects[i].properties["chart.combinedchart.effect"]](options,this.objects[i].properties["chart.combinedchart.effect.callback"])}else this.objects[i].draw()};